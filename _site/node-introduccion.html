<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Primary Meta Tags -->
    <title>Node.js - Introducción</title>
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
      integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm"
      crossorigin="anonymous"
    />
        <script>
	  document.documentElement.setAttribute("data-theme", localStorage.getItem("theme") ?  localStorage.getItem("theme") : "");
    </script>
    <link href="/node-express-library-teoria/assets/css/syntax.css" rel="stylesheet">    
    <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.0.13/css/all.css' integrity='sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp' crossorigin='anonymous'>
    <link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css" />
    <link rel="stylesheet" href="/node-express-library-teoria/assets/css/style.css" />
    <link rel="stylesheet" href="/node-express-library-teoria/assets/css/styles.css">
    <link rel="stylesheet" href="/node-express-library-teoria/assets/css/utilities.css" />
    <link rel="stylesheet" href="/node-express-library-teoria/assets/css/post.css" />
 </head>
  <body class="preview-zenburn">
    <header id="hero">
      <!-- Navbar -->
      <nav class="navbar">
        <div class="container">
          <!-- Logo -->
          <h1 id="logo">
          </h1>
          <!-- Navbar links -->
          <ul class="nav-menu">
            <li><a class="nav-link  btn btn-primary" href="/">HOME</a></li>
            <li><a class="nav-link  btn btn-primary" href="/node-express-library-teoria/">PORTADA</a></li>
            <li>
              <a
                class="nav-link btn btn-primary"
                href="https://github.com/victorponz/node-express-library-teoria"
                >GitHub <i class="fas fa-arrow-right"></i
              ></a>
            </li>
            <!-- Toggle switch -->
            <div class="theme-switch">
              <input type="checkbox" id="switch" />
              <label class="toggle-icons" for="switch">
                <img class="moon" src="/node-express-library-teoria/assets/moon.svg" />
                <img class="sun" src="/node-express-library-teoria/assets/sun.svg" />
              </label>
            </div>
            <!-- Hamburger menu -->
          </ul>
          <div class="hamburger">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
          </div>
        </div>
      </nav>
    </header>

    
    
    
    
    
    
    
    <div>
       
        <div id="menuContainer">
                            
                <ul id="menuFixed" class="typora-menu-hidden">
  <li><a href="#instalación-de-node">Instalación de node</a></li>
  <li><a href="#qué-son-express-y-node">¿Qué son Express y Node?</a></li>
  <li><a href="#dónde-comenzó">¿Dónde comenzó?</a></li>
  <li><a href="#qué-popularidad-tiene-nodeexpress">¿Qué popularidad tiene Node/Express?</a></li>
  <li><a href="#es-express-dogmático">¿Es Express dogmático?</a></li>
  <li><a href="#cómo-es-el-código-para-express">¿Cómo es el código para Express?</a>
    <ul>
      <li><a href="#hola-mundo---en-express">Hola Mundo! - en Express</a></li>
      <li><a href="#importando-y-creando-módulos">Importando y creando módulos</a></li>
      <li><a href="#usando-apis-asíncronas">Usando APIs asíncronas</a></li>
      <li><a href="#creando-manejadores-de-rutas">Creando manejadores de rutas</a></li>
      <li><a href="#usando-middleware">Usando middleware</a></li>
      <li><a href="#sirviendo-archivos-estáticos">Sirviendo archivos estáticos</a></li>
      <li><a href="#manejando-errores">Manejando errores</a></li>
      <li><a href="#usando-bases-de-datos">Usando Bases de datos</a></li>
      <li><a href="#renderización-de-data-vistas">Renderización de data (vistas)</a></li>
      <li><a href="#estructura-de-archivos">Estructura de Archivos</a></li>
    </ul>
  </li>
  <li><a href="#resumen">Resumen</a></li>
  <li><a href="#ver-también">Ver también</a></li>
</ul>
            
            <div class="top-hidden" id="topFixed">
                <a title='Mostrar/Ocultar menú' class="toogle expanded pull-left js-toolbar-action" aria-label="" href="#"><i class="fas fa-align-justify"></i></a>
            </div>
        </div>
    </div>
    <div id="write-wrapper">
    <section id="projects" class="project-container container">
      <div id="subject-container" style="width: 100%; padding-top:80px; min-height:800px">
         <div class="subject-details">
          <div id="write">
            <div style="height: 80px; border-left: 5px solid var(--text-color)"></div>
            <h1 class="indice">Introducción</h1>
          
          <h3 class="indice">Índice</h3>
          <ul id="menu" class="atypora-menu">
  <li><a href="#instalación-de-node">Instalación de node</a></li>
  <li><a href="#qué-son-express-y-node">¿Qué son Express y Node?</a></li>
  <li><a href="#dónde-comenzó">¿Dónde comenzó?</a></li>
  <li><a href="#qué-popularidad-tiene-nodeexpress">¿Qué popularidad tiene Node/Express?</a></li>
  <li><a href="#es-express-dogmático">¿Es Express dogmático?</a></li>
  <li><a href="#cómo-es-el-código-para-express">¿Cómo es el código para Express?</a>
    <ul>
      <li><a href="#hola-mundo---en-express">Hola Mundo! - en Express</a></li>
      <li><a href="#importando-y-creando-módulos">Importando y creando módulos</a></li>
      <li><a href="#usando-apis-asíncronas">Usando APIs asíncronas</a></li>
      <li><a href="#creando-manejadores-de-rutas">Creando manejadores de rutas</a></li>
      <li><a href="#usando-middleware">Usando middleware</a></li>
      <li><a href="#sirviendo-archivos-estáticos">Sirviendo archivos estáticos</a></li>
      <li><a href="#manejando-errores">Manejando errores</a></li>
      <li><a href="#usando-bases-de-datos">Usando Bases de datos</a></li>
      <li><a href="#renderización-de-data-vistas">Renderización de data (vistas)</a></li>
      <li><a href="#estructura-de-archivos">Estructura de Archivos</a></li>
    </ul>
  </li>
  <li><a href="#resumen">Resumen</a></li>
  <li><a href="#ver-también">Ver también</a></li>
</ul>      
          
       
          <div id='content'>
           
            <p>En este primer articulo de Express resolveremos las preguntas “¿Qué es Node?” y “¿Qué es Express?”, y te daremos una visión general de que hace especial al framework web “Express”. Delinearemos las características principales, y te mostraremos algunos de los principales bloques de construcción de una aplicación en Express (aunque en este punto no tendrás todavía un entorno de desarrollo en que probarlo).</p>

<table>
  <tbody>
    <tr>
      <th scope="row">Pre-requisitos:</th>
      <td>
        <p>
          Conocimientos básicos de informática. Noción general sobre
          <a href="https://developer.mozilla.org/es/docs/Learn/Server-side/Primeros_pasos">programación lado servidor de sitios web</a>, y en particular los mecanismos de las interacciones
          <a href="/es/docs/Learn/Server-side/Primeros_pasos/Vision_General_Cliente_Servidor">cliente-servidor en sitios web</a>.
        </p>
      </td>
    </tr>
    <tr>
      <th scope="row">Objetivo:</th>
      <td>
        <p>
          Ganar familiaridad con lo que es Express y cómo encaja con Node, qué
          funcionalidad proporciona y los pilares de construcción de una
          aplicación Express.
        </p>
      </td>
    </tr>
  </tbody>
</table>

<h2 id="instalación-de-node">Instalación de node</h2>

<p>Para instalar <code class="language-plaintext highlighter-rouge">node.js</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>curl -sL https://deb.nodesource.com/setup_lts.x | sudo -E bash -
sudo apt-get install -y nodejs
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Y para instalar el gestor de paquetes <code class="language-plaintext highlighter-rouge">nmp</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>sudo apt install npm
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Además vamos a instalar <code class="language-plaintext highlighter-rouge">nodemon</code>  para que rearranque automáticamente el servidor al realizar cualquier cambio en un archivo de la aplicación.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>sudo npm install -g nodemon
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="qué-son-express-y-node">¿Qué son Express y Node?</h2>

<p><a href="https://nodejs.org/">Node</a> (o más correctamente: <em>Node.js</em>) es un entorno que trabaja en tiempo de ejecución, de código abierto, multi-plataforma, que permite a los desarrolladores crear toda clase de herramientas de lado servidor y aplicaciones en <a href="https://developer.mozilla.org/es/docs/Glossary/JavaScript">JavaScript</a>. La ejecución en tiempo real está pensada para usarse fuera del contexto de un explorador web (es decir, ejecutarse directamente en una computadora o sistema operativo de servidor). Como tal, el entorno omite las APIs de JavaScript específicas del explorador web y añade soporte para APIs de sistema operativo más tradicionales que incluyen HTTP y bibliotecas de sistemas de ficheros.</p>

<p>Desde una perspectiva de desarrollo de servidor web, Node tiene un gran número de ventajas:</p>

<ul>
  <li>¡Gran rendimiento! <em>Node</em> ha sido diseñado para optimizar el rendimiento y la escalabilidad en aplicaciones web y es un muy buen complemento para muchos problemas comunes de desarrollo web (ej, aplicaciones web en tiempo real).</li>
  <li>El código está escrito en “simple JavaScript”, lo que significa que se pierde menos tiempo ocupándose de las “conmutaciones de contexto” entre lenguajes cuando estás escribiendo tanto el código del explorador web como del servidor.</li>
  <li>JavaScript es un lenguaje de programación relativamente nuevo y se beneficia de los avances en diseño de lenguajes cuando se compara con otros lenguajes de servidor web tradicionales (ej, Python, PHP, etc.) Muchos otros lenguajes nuevos y populares se compilan/convierten a JavaScript de manera que puedes también usar CoffeeScript, ClosureScript, Scala, LiveScript, etc.</li>
  <li>El gestor de paquetes de <em>Node</em> (NPM del inglés: Node Packet Manager) proporciona acceso a cientos o miles de paquetes reutilizables. Tiene además la mejor en su clase resolución de dependencias y puede usarse para automatizar la mayor parte de la cadena de herramientas de compilación.</li>
  <li>Es portable, con versiones que funcionan en Microsoft Windows, OS X, Linux, Solaris, FreeBSD, OpenBSD, WebOS, y NonStop OS. Además, está bien soportado por muchos de los proveedores de hospedaje web, que proporcionan infraestructura específica y documentación para hospedaje de sitios <em>Node</em>.</li>
  <li>Tiene un ecosistema y comunidad de desarrolladores de terceros muy activa, con cantidad de gente deseosa de ayudar.</li>
</ul>

<p>Puedes crear de forma sencilla un servidor web básico para responder cualquier petición simplemente usando el paquete HTTP de <em>Node</em>, como se muestra abajo. Este, creará un servidor y escuchará cualquier clase de peticiones en la URL <code class="language-plaintext highlighter-rouge">http://127.0.0.1:8000/</code>; cuando se reciba una petición, se responderá enviando en texto la respuesta: “Hola Mundo!”.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="c1">// Se carga el módulo de HTTP</span>
<span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">http</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Creación del servidor HTTP, y se define la escucha</span>
<span class="c1">// de peticiones en el puerto 8000</span>
<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>

   <span class="c1">// Se define la cabecera HTTP, con el estado HTTP (OK: 200) y el tipo de contenido</span>
   <span class="nx">response</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text/plain</span><span class="dl">'</span><span class="p">});</span>

   <span class="c1">// Se responde, en el cuerpo de la respuesta con el mensaje "Hello World"</span>
   <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hola Mundo!</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8000</span><span class="p">);</span>

<span class="c1">// Se escribe la URL para el acceso al servidor</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Servidor en la url http://127.0.0.1:8000/</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Otras tareas comunes de desarrollo web no están directamente soportadas por el mismo <em>Node</em>. Si quieres añadir el manejo específico de diferentes verbos HTTP (ej, <code class="language-plaintext highlighter-rouge">GET</code>, <code class="language-plaintext highlighter-rouge">POST</code>, <code class="language-plaintext highlighter-rouge">DELETE</code>, etc.), gestionar de forma separada las peticiones por medio de diferentes direcciones URL (“rutas”), servir ficheros estáticos o usar plantillas para crear la respuesta de forma dinámica, necesitarás escribir el código por tí mismo, o ¡puedes evitar reinventar la rueda usando un framework web!</p>

<p><a href="https://expressjs.com/">Express</a> es el framework web más popular de <em>Node</em>, y es la librería subyacente para un gran número de otros <a href="https://expressjs.com/en/resources/frameworks.html">frameworks web de Node</a> populares. Proporciona mecanismos para:</p>

<ul>
  <li>Escritura de manejadores de peticiones con diferentes verbos HTTP en diferentes caminos URL (rutas).</li>
  <li>Integración con motores de renderización de “vistas” para generar respuestas mediante la introducción de datos en plantillas.</li>
  <li>Establecer ajustes de aplicaciones web como qué puerto usar para conectar, y la localización de las plantillas que se utilizan para renderizar la respuesta.</li>
  <li>Añadir procesamiento de peticiones “middleware” adicional en cualquier punto dentro de la tubería de manejo de la petición.</li>
</ul>

<p>A pesar de que <em>Express</em> es en sí mismo bastante minimalista, los desarrolladores han creado paquetes de middleware compatibles para abordar casi cualquier problema de desarrollo web. Hay librerías para trabajar con cookies, sesiones, inicios de sesión de usuario, parámetros URL, datos <code class="language-plaintext highlighter-rouge">POST</code>, cabeceras de seguridad y <em>muchos</em> más. Puedes encontrar una lista de paquetes middleware mantenida por el equipo de Express en <a href="https://expressjs.com/es/resources/middleware.html">Express Middleware</a> (junto con una lista de algunos de los paquetes más populares de terceros).</p>

<blockquote>
  <p class="info"><i class="fa fa-info icon-blockquote"></i> Esta flexibilidad es una espada de doble filo. Hay paquetes de middleware para abordar casi cualquier problema o requerimiento, pero deducir cuáles son los paquetes adecuados a usar algunas veces puede ser un auténtico reto. Tampoco hay una “forma correcta” de estructurar una aplicación, y muchos ejemplos que puedes encontrar en la Internet no son óptimos, o sólo muestran una pequeña parte de lo que necesitas hacer para desarrollar una aplicación web.</p>
</blockquote>

<h2 id="dónde-comenzó">¿Dónde comenzó?</h2>

<p><em>Node</em> fué lanzado inicialmente, sólo para Linux, en 2009. El gestor de paquetes NPM fué lanzado en 2010, y el soporte nativo para Windows fue añadido en 2012. La versión actual LTS (Long Term Suppport) es Node v12.18.0 mientras que la última versión es Node 14.4.0. Ésto es sólo una pequeña foto de una historia muy rica; profundiza en <a href="https://en.wikipedia.org/wiki/Node.js#History">Wikipedia</a> si quieres saber más).</p>

<p><em>Express</em> fue lanzado inicialmente en Noviembre de 2010 y está ahora en la versión 4.17.1 de la API. Puedes comprobar en el <a href="https://expressjs.com/en/changelog/4x.html">changelog</a> la información sobre cambios en la versión actual, y en <a href="https://github.com/expressjs/express/blob/master/History.md">GitHub</a> notas de lanzamiento históricas más detalladas.</p>

<h2 id="qué-popularidad-tiene-nodeexpress">¿Qué popularidad tiene Node/Express?</h2>

<p>La popularidad de un framework web es importante porque es un indicador de se continuará manteniendo y qué recursos tienen más probabilidad de estar disponibles en términos de documentación, librerías de extensiones y soporte técnico.</p>

<p>No existe una medida disponible de inmediato y definitiva de la popularidad de los frameworks de lado servidor (aunque sitios como <a href="http://hotframeworks.com/">Hot Frameworks</a> intentan asesorar sobre popularidad usando mecanismos como contar para cada plataforma el número de preguntas sobre proyectos en GitHub y StackOverflow). Una pregunta mejor es si Node y Express son lo “suficientemente populares” para evitar los problemas de las plataformas menos populares. ¿Continúan evolucionando? ¿Puedes conseguir la ayuda que necesitas? ¿Hay alguna posibilidad de que consigas un trabajo remunerado si aprendes Express?</p>

<p>De acuerdo con el número de <a href="https://expressjs.com/en/resources/companies-using-express.html">compañías de perfil alto</a> que usan Express, el número de gente que contribuye al código base, y el número de gente que proporciona soporte tanto libre como pagado, podemos entonces decir que sí, !<em>Express</em> es un framework popular!</p>

<h2 id="es-express-dogmático">¿Es Express dogmático?</h2>

<p>Los frameworks web frecuentemente se refieren a sí mismos como “dogmáticos” (“<em>opinionated</em>”) o “no dogmáticos” (“<em>unopinionated</em>”).</p>

<p>Los frameworks dogmáticos son aquellos que opinan acerca de la “manera correcta” de gestionar cualquier tarea en particular. Ofrecen soporte para el desarrollo rápido en un <em>dominio en particular</em> (resolver problemas de un tipo en particular) porque la manera correcta de hacer cualquier cosa está generalmente bien comprendida y bien documentada. Sin embargo pueden ser menos flexibles para resolver problemas fuera de su dominio principal, y tienden a ofrecer menos opciones para elegir qué componentes y enfoques pueden usarse.</p>

<p>Los framewoks no dogmáticos, en contraposición, tienen muchas menos restricciones sobre el modo mejor de unir componentes para alcanzar un objetivo, o incluso qué componentes deberían usarse. Hacen más fácil para los desarrolladores usar las herramientas más adecuadas para completar una tarea en particular, si bien al coste de que necesitas encontrar esos componentes por tí mismo.</p>

<p>Express es no dogmático, transigente. Puedes insertar casi cualquier middleware compatible que te guste dentro de la cadena de manejo de la petición, en casi cualquier orden que te apetezca. Puedes estructurar la app en un fichero o múltiples ficheros y usar cualquier estructura de directorios. ¡Algunas veces puedes sentir que tienes demasiadas opciones!</p>

<h2 id="cómo-es-el-código-para-express">¿Cómo es el código para Express?</h2>

<p>En sitios web o aplicaciones web dinámicas, que accedan a bases de datos, el servidor espera a recibir peticiones HTTP del navegador (o cliente). Cuando se recibe una petición, la aplicación determina cuál es la acción adecuada correspondiente, de acuerdo a la estructura de la URL y a la información (opcional) indicada en la petición con los métodos <code class="language-plaintext highlighter-rouge">POST</code> o <code class="language-plaintext highlighter-rouge">GET</code>. Dependiendo de la acción a realizar, puede que se necesite leer o escribir en la base de datos, o realizar otras acciones necesarias para atender la petición correctamente. La aplicación ha de responder al navegador, normalmente, creando una página HTML dinámicamente para él, en la que se muestre la información pedida, usualmente dentro de un elemento especifico para este fin, en una plantilla HTML.</p>

<p><em>Express</em> posee métodos para especificar que función ha de ser llamada dependiendo del verbo HTTP usado en la petición (<code class="language-plaintext highlighter-rouge">GET</code>, <code class="language-plaintext highlighter-rouge">POST</code>, <code class="language-plaintext highlighter-rouge">SET</code>, etc.) y la estructura de la URL (“ruta”). También tiene los métodos para especificar que plantilla (“view”) o gestor de visualización utilizar, donde están guardadas las plantillas de HTML que han de usarse y como generar la visualización adecuada para cada caso. El middleware de <em>Express</em>, puede usarse también para añadir funcionalidades para la gestión de cookies, sesiones y usuarios, mediante el uso de parámetros, en los métodos <code class="language-plaintext highlighter-rouge">POST</code>/<code class="language-plaintext highlighter-rouge">GET</code>. Puede utilizarse además cualquier sistema de trabajo con bases de datos, que sea soportado por <em>Node</em> (<em>Express</em> no especifica ningún método preferido para trabajar con bases de datos).</p>

<p>En las siguientes secciones, se explican algunos puntos comunes que se pueden encontrar cuando se trabaja con código de <em>Node</em> y <em>Express</em>.</p>

<h3 id="hola-mundo---en-express">Hola Mundo! - en Express</h3>

<p>Primero consideremos el tradicional ejemplo de <a href="https://expressjs.com/en/starter/hello-world.html">Hola Mundo!</a> (se comentará cada parte a continuación).</p>

<blockquote>
  <p class="info"><i class="fa fa-info icon-blockquote"></i>  Si tiene <em>Node</em> y <em>Express</em> instalado (o piensa instalarlos posteriormente) puede guardar este código en un archivo llamado <strong>app.js</strong> y ejecutarlo posteriormente en la linea de comandos invocándolo mediante: <code class="language-plaintext highlighter-rouge">node app.js</code>.</p>
</blockquote>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hola Mundo!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Aplicación ejemplo, escuchando el puerto 3000!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Las primeras dos líneas incluyen (mediante la orden <code class="language-plaintext highlighter-rouge">require()</code>) el módulo de Express y crean una <a href="https://expressjs.com/en/4x/api.html#app">aplicación de Express</a>. Este elemento se denomina comúnmente <code class="language-plaintext highlighter-rouge">app</code>, y posee métodos para el enrutamiento de las peticiones HTTP, configuración del ‘middleware’, y visualización de las vistas de HTML, uso del motores de ‘templates’, y gestión de las <a href="https://expressjs.com/en/4x/api.html#app.settings.table">configuraciones de las aplicaciones</a> que controlan la aplicación (por ejemplo el entorno, las definiciones para enrutado … etcetera.)</p>

<p>Las líneas que siguen en el código (las tres líneas que comienzan con <code class="language-plaintext highlighter-rouge">app.get</code>) muestran una definición de ruta que se llamará cuando se reciba una petición HTTP <code class="language-plaintext highlighter-rouge">GET</code> con una dirección (<code class="language-plaintext highlighter-rouge">'/'</code>) relativa al directorio raíz. La función ‘callback’ coge una petición y una respuesta como argumentos, y ejecuta un <a href="https://expressjs.com/en/4x/api.html#res.send"><code class="language-plaintext highlighter-rouge">send()</code></a> en la respuesta, para enviar la cadena de caracteres: “Hola Mundo!”.</p>

<p>El bloque final de código, define y crea el servidor, escuchando el puerto 3000 e imprime un comentario en la consola. Cuando se está ejecutando el servidor, es posible ir hasta la dirección <code class="language-plaintext highlighter-rouge">localhost:3000</code> en un navegador, y ver como el servidor de este ejemplo devuelve el mensaje de respuesta.</p>

<h3 id="importando-y-creando-módulos">Importando y creando módulos</h3>

<p>Un módulo es una librería o archivo JavaScript que puede ser importado dentro de otro código utilizando la función <code class="language-plaintext highlighter-rouge">require()</code> de Node. Por sí mismo, <em>Express</em> es un módulo, como lo son el middleware y las librerías de bases de datos que se utilizan en las aplicaciones <em>Express.</em></p>

<p>El código mostrado abajo, muestra como puede importarse un módulo con base a su nombre, como ejemplo se utiliza el framework <em>Express</em> . Primero se invoca la función <code class="language-plaintext highlighter-rouge">require()</code>, indicando como parámetro el nombre del módulo o librería como una cadena (<code class="language-plaintext highlighter-rouge">'express'</code>), posteriormente se invoca el objeto obtenido para crear una <a href="https://expressjs.com/en/4x/api.html#app">aplicación Express</a>.</p>

<p>Posteriormente, se puede acceder a las propiedades y funciones del objeto Aplicación.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>También podemos crear nuestros propios módulos que puedan posteriormente ser importados de la misma manera.</p>

<blockquote>
  <p class="info"><i class="fa fa-info icon-blockquote"></i> Usted puede desear crear sus propios módulos, esto le permitirá organizar su código en partes más administrables; una aplicación que reside en un solo archivo es difícil de entender y manejar.El utilizar módulos independientes también le permite administrar el espacio de nombres, de esta manera unicamente las variables que exporte explícitamente son importadas cuando utilice un módulo.</p>
</blockquote>

<p>Para hacer que los objetos estén disponibles fuera de un módulo, solamente es necesario asignarlos al objeto <code class="language-plaintext highlighter-rouge">exports</code>. Por ejemplo, el módulo mostrado a continuación <strong>square.js</strong> es un archivo que exporta los métodos <code class="language-plaintext highlighter-rouge">area()</code> y <code class="language-plaintext highlighter-rouge">perimeter()</code> :</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nx">exports</span><span class="p">.</span><span class="nx">area</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">width</span> <span class="o">*</span> <span class="nx">width</span><span class="p">;</span> <span class="p">};</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">perimeter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">4</span> <span class="o">*</span> <span class="nx">width</span><span class="p">;</span> <span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Nosotros podemos importar este módulo utilizando la función <code class="language-plaintext highlighter-rouge">require()</code>, y entonces podremos invocar los métodos exportados de la siguiente manera:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c1">// Utilizamos la función require() El nombre del archivo se ingresa sin la extensión (opcional) .js</span>
<span class="kd">var</span> <span class="nx">square</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./square</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// invocamos el metodo area()</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">El área de un cuadrado con lado de 4 es </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">square</span><span class="p">.</span><span class="nx">area</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p class="info"><i class="fa fa-info icon-blockquote"></i>  Usted también puede especificar una ruta absoluta a la ubicación del módulo (o un nombre como se realizó inicialmente).</p>
</blockquote>

<p>Si usted desea exportar completamente un objeto en una asignación en lugar de construir cada propiedad por separado, debe asignarlo al módulo <code class="language-plaintext highlighter-rouge">module.exports</code> como se muestra a continuación (también puede hacer esto al inicio de un constructor o de otra función.)</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">area</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">width</span> <span class="o">*</span> <span class="nx">width</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="na">perimeter</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">4</span> <span class="o">*</span> <span class="nx">width</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Para más información acerca de módulos vea <a href="https://nodejs.org/api/modules.html#modules_modules">Modulos</a> (<em>Node</em> API docs).</p>

<h3 id="usando-apis-asíncronas">Usando APIs asíncronas</h3>

<p>El código JavaScript usa frecuentemente APIs asíncronas antes que sincrónicas para operaciones que tomen algún tiempo en completarse. En una API sincrónica cada operación debe completarse antes de que la siguiente pueda comenzar. Por ejemplo, la siguiente función de registro es síncrona, y escribirá en orden el texto en la consola (Primero, Segundo).</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Primero</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Segundo</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>En contraste, en una API asincrónica, la API comenzará una operación e inmediatamente retornará (antes de que la operación se complete). Una vez que la operación finalice, la API usará algún mecanismo para realizar operaciones adicionales. Por ejemplo, el código de abajo imprimirá “Segundo, Primero” porque aunque el método <code class="language-plaintext highlighter-rouge">setTimeout()</code> es llamado primero y retorna inmediatamente, la operación no se completa por varios segundos.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Primero</span><span class="dl">'</span><span class="p">);</span>
   <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Segundo</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Usar APIs asíncronas sin bloques es aun mas importante en <em>Node</em> que en el navegador, porque <em>Node</em> es un entorno de ejecución controlado por eventos de un solo hilo. “Un solo hilo” quiere decir que todas las peticiones al servidor son ejecutadas en el mismo hilo ( en vez de dividirse en procesos separados). Este modelo es extremadamente eficiente en términos de velocidad y recursos del servidor, pero eso significa que si alguna de sus funciones llama a métodos sincrónicos que tomen demasiado tiempo en completarse, bloquearan no solo la solicitud actual, sino también cualquier otra petición que este siendo manejada por tu aplicación web.</p>

<p>Hay muchas maneras para una API asincrónica de notificar a su aplicación que se ha completado. La manera mas común es registrar una función callback cuando usted invoca a una API asincrónica, la misma será llamada de vuelta cuando la operación se complete. Éste es el enfoque utilizado anteriormente.</p>

<blockquote>
  <p class="info"><i class="fa fa-info icon-blockquote"></i>  Usar “callbacks” puede ser un poco enmarañado si usted tiene una secuencia de operaciones asíncronas dependientes que deben ser llevadas a cabo en orden, porque esto resulta en múltiples niveles de “callbacks” anidadas. Este problema es comúnmente conocido como “callback hell” (callback del infierno). Este problema puede ser reducido con buenas practicas de código (vea <a href="http://callbackhell.com/">http://callbackhell.com/</a>), usando un módulo como <a href="https://www.npmjs.com/package/async">async</a>, o incluso avanzando a características de ES6 como las <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Promise">promesas</a>.</p>
</blockquote>

<blockquote>
  <p class="info"><i class="fa fa-info icon-blockquote"></i> Una convención común para <em>Node</em> y <em>Express</em> es usar callbacks de error primero. En esta convención el primer valor en su función callback es un error, mientras que los argumentos subsecuentes contienen datos correctos. Hay una buena explicación de porque este enfoque es útil en este blog: <a href="http://fredkschott.com/post/2014/03/understanding-error-first-callbacks-in-node-js">The Node.js Way - Understanding Error-First Callbacks</a> (fredkschott.com).</p>
</blockquote>

<h3 id="creando-manejadores-de-rutas">Creando manejadores de rutas</h3>

<p>En nuestro ejemplo anterior de “Hola Mundo!” en <em>Express</em> (véase mas arriba), definimos una función (callback) manejadora de ruta para peticiones HTTP <code class="language-plaintext highlighter-rouge">GET</code> a la raíz del sitio (<code class="language-plaintext highlighter-rouge">'/'</code>).</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello World!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>La función callback toma una petición y una respuesta como argumentos. En este caso el método simplemente llama a <a href="https://expressjs.com/en/4x/api.html#res.send"><code class="language-plaintext highlighter-rouge">send()</code></a> en la respuesta para retornar la cadena “Hello World!”. Hay un <a href="https://expressjs.com/en/guide/routing.html#response-methods">número de otros métodos de respuesta</a> para finalizar el ciclo de solicitud/respuesta, por ejemplo podrá llamar a <a href="https://expressjs.com/en/4x/api.html#res.json"><code class="language-plaintext highlighter-rouge">res.json()</code></a> para enviar una respuesta JSON o <a href="https://expressjs.com/en/4x/api.html#res.sendFile"><code class="language-plaintext highlighter-rouge">res.sendFile()</code></a> para enviar un archivo.</p>

<blockquote>
  <p class="info"><i class="fa fa-info icon-blockquote"></i>  Usted puede utilizar cualquier nombre que quiera para los argumentos en las funciones callback; cuando la callback es invocada el primer argumento siempre sera la petición y el segundo siempre sera la respuesta. Tiene sentido nombrarlos de manera que pueda identificar el objeto con el que esta trabajando en el cuerpo de la callback.</p>
</blockquote>

<p>El objeto que representa una aplicación de <em>Express</em>, también posee métodos para definir los manejadores de rutas para el resto de los verbos HTTP: <code class="language-plaintext highlighter-rouge">post()</code>, <code class="language-plaintext highlighter-rouge">put()</code>, <code class="language-plaintext highlighter-rouge">delete()</code>, <code class="language-plaintext highlighter-rouge">options()</code>, <code class="language-plaintext highlighter-rouge">trace()</code>, <code class="language-plaintext highlighter-rouge">copy()</code>, <code class="language-plaintext highlighter-rouge">lock()</code>, <code class="language-plaintext highlighter-rouge">mkcol()</code>, <code class="language-plaintext highlighter-rouge">move()</code>, <code class="language-plaintext highlighter-rouge">purge()</code>, <code class="language-plaintext highlighter-rouge">propfind()</code>, <code class="language-plaintext highlighter-rouge">proppatch()</code>, <code class="language-plaintext highlighter-rouge">unlock()</code>, <code class="language-plaintext highlighter-rouge">report()</code>, <code class="language-plaintext highlighter-rouge">mkactivity()</code>, <code class="language-plaintext highlighter-rouge">checkout()</code>, <code class="language-plaintext highlighter-rouge">merge()</code>, <code class="language-plaintext highlighter-rouge">m-search()</code>, <code class="language-plaintext highlighter-rouge">notify()</code>, <code class="language-plaintext highlighter-rouge">subscribe()</code>, <code class="language-plaintext highlighter-rouge">unsubscribe()</code>, <code class="language-plaintext highlighter-rouge">patch()</code>, <code class="language-plaintext highlighter-rouge">search()</code>, y <code class="language-plaintext highlighter-rouge">connect()</code>.</p>

<p>Hay un método general para definir las rutas: <code class="language-plaintext highlighter-rouge">app.all()</code>, el cual será llamado en respuesta a cualquier método HTTP. Se usa para cargar funciones del middleware en una dirección particular para todos los métodos de peticiones. El siguiente ejemplo (de la documentación de <em>Express</em>) muestra el uso de los manejadores a <code class="language-plaintext highlighter-rouge">/secret</code> sin tener en cuenta el verbo HTTP utilizado (siempre que esté definido por el <a href="https://nodejs.org/api/http.html#http_http_methods">módulo http</a>).</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="dl">'</span><span class="s1">/secret</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Accediendo a la seccion secreta ...</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span> <span class="c1">// pasa el control al siguiente manejador</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Las rutas le permiten igualar patrones particulares de caracteres en la URL, y extraer algunos valores de ella y pasarlos como parámetros al manejador de rutas (como atributo del objeto petición pasado como parámetro).</p>

<p>Usualmente es útil agrupar manejadores de rutas para una parte del sitio juntos y accederlos usando un prefijo de ruta en común. (Ej: un sitio con una Wiki podría tener todas las rutas relacionadas a dicha sección en un archivo y siendo accedidas con el prefijo de ruta /wiki/. En <em>Express</em> esto se logra usando el objeto <a href="http://expressjs.com/en/guide/routing.html#express-router"><code class="language-plaintext highlighter-rouge">express.Router</code></a>. Ej: podemos crear nuestra ruta wiki en un módulo llamado wiki.js, y entonces exportar el objeto <code class="language-plaintext highlighter-rouge">Router</code>, como se muestra debajo:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="c1">// wiki.js - Modulo de rutas Wiki</span>

<span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="c1">// Home page route</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Página de inicio Wiki</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// About page route</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/about</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Acerca de esta wiki</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p class="info"><i class="fa fa-info icon-blockquote"></i> Agregar rutas al objeto <code class="language-plaintext highlighter-rouge">Router</code> es como agregar rutas al objeto <code class="language-plaintext highlighter-rouge">app</code> (como se vio anteriormente).</p>
</blockquote>

<p>Para usar el router en nuestro archivo app principal, necesitamos <code class="language-plaintext highlighter-rouge">require()</code> el módulo de rutas (<strong>wiki.js</strong>), entonces llama a <code class="language-plaintext highlighter-rouge">use()</code> en la aplicación <em>Express</em> para agregar el Router al software intermediario que maneja las rutas. Las dos rutas serán accesibles entonces desde <code class="language-plaintext highlighter-rouge">/wiki/</code> y <code class="language-plaintext highlighter-rouge">/wiki/about/</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">wiki</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./wiki.js</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/wiki</span><span class="dl">'</span><span class="p">,</span> <span class="nx">wiki</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Le mostraremos mucho más sobre como trabajar con rutas, y en particular, acerca de como usar el <code class="language-plaintext highlighter-rouge">Router</code>, más adelante en la sección <a href="https://developer.mozilla.org/es/docs/es/docs/Learn/Server-side/Express_Nodejs/routes">Rutas y controladores .</a></p>

<h3 id="usando-middleware">Usando middleware</h3>

<p>El “middleware” es ampliamente utilizado en las aplicaciones de <em>Express:</em> desde tareas para servir archivos estáticos, a la gestión de errores o la compresión de las respuestas HTTP. Mientras las funciones de enrutamiento, con el objeto <a href="http://expressjs.com/en/guide/routing.html#express-router">express.Router</a>, se encargan del ciclo petición-respuesta, al gestionar la respuesta adecuada al cliente, las funciones de middleware normalmente realizan alguna operación al gestionar una petición o respuesta y a continuación llaman a la siguiente función en la “pila”, que puede ser otra función de middleware u otra función de enrutamiento. El orden en el que las funciones de middleware son llamadas depende del desarrollador de la aplicación.</p>

<blockquote>
  <p class="info"><i class="fa fa-info icon-blockquote"></i> El middleware puede realizar cualquier operación: hacer cambios a una petición, ejecutar código, realizar cambios a la petición o al objeto pedido, puede también finalizar el ciclo de petición-respuesta. Si no finaliza el ciclo debe llamar a la función <code class="language-plaintext highlighter-rouge">next()</code> para pasar el control de la ejecución a la siguiente función del middleware ( o a la petición quedaría esperando una respuesta … ).</p>
</blockquote>

<p>La mayoría de las aplicaciones usan middleware desarrollado por terceras partes, para simplificar funciones habituales en el desarrollo web, como puede ser: gestión de cookies, sesiones, autentificado de usuarios, peticiones <code class="language-plaintext highlighter-rouge">POST</code> y datos en JSON, registros de eventos, etc. Puede encontrar en el siguiente enlace una <a href="http://expressjs.com/en/resources/middleware.html">lista de middleware mantenido por el equipo de <em>Express</em></a> (que también incluye otros paquetes populares de terceras partes). Las librerías de <em>Express</em> están disponibles con la aplicación NPM (Node Package Manager).</p>

<p>Para usar estas colecciones, primero ha de instalar la aplicación usando NPM. Por ejemplo para instalar el registro de peticiones HTTP <a href="http://expressjs.com/en/resources/middleware/morgan.html">morgan</a>, se haría con el comando Bash:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>npm <span class="nb">install </span>morgan
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Entonces podrías llamar a la función <code class="language-plaintext highlighter-rouge">use()</code> en un objeto de aplicación <em>Express</em> para utilizar este middleware a su aplicación.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">morgan</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">logger</span><span class="p">(</span><span class="dl">'</span><span class="s1">dev</span><span class="dl">'</span><span class="p">));</span>
<span class="p">...</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p class="info"><i class="fa fa-info icon-blockquote"></i> Las funciones Middleware y routing son llamadas en el orden que son declaradas. Para algunos middleware el orden es importante (por ejemplo si el middleware de sesion depende del middleware de cookie, entonces el manejador de cookie tiene que ser llamado antes). Casi siempre es el caso que el middleware es llamado antes de configurar las rutas, o tu manejador de rutas no tendra acceso a la funcionalidad agregada por tu middleware.</p>
</blockquote>

<p>Tu puedes escribir tu propia funcion middleware, y si quieres hacerlo así (solo para crear código de manejo de error). La única diferencia entre una función middleware y un callback manejador de rutas es que las funciones middleware tienen un tercer argumento <code class="language-plaintext highlighter-rouge">next</code>, cuyas funciones middleware son esperadas para llamarlas si ellas no completan el ciclo request (cuando la función midleware es llamada, esta contiene la próxima función que debe ser llamada).</p>

<p>Puedes agregar una función middleware a la cadena de procesamiento con cualquier <code class="language-plaintext highlighter-rouge">app.use()</code> o <code class="language-plaintext highlighter-rouge">app.add()</code>, dependiendo de si quiere aplicar el middleware a todas las respuestas o a respuestas con un verbo particular HTTP (<code class="language-plaintext highlighter-rouge">GET</code>, <code class="language-plaintext highlighter-rouge">POST</code>, etc). Usted especifica rutas, lo mismo en ambos casos, aunque la ruta es opcional cuando llama <strong>app.use()</strong>.</p>

<p>El ejemplo de abajo muestra como puede agregar la función middleware usando ambos métodos, y con/sin una ruta.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="c1">// An example middleware function</span>
<span class="kd">var</span> <span class="nx">a_middleware_function</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ... perform some operations</span>
  <span class="nx">next</span><span class="p">();</span> <span class="c1">// Call next() so Express will call the next middleware function in the chain.</span>
<span class="p">}</span>

<span class="c1">// Function added with use() for all routes and verbs</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">a_middleware_function</span><span class="p">);</span>

<span class="c1">// Function added with use() for a specific route</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/someroute</span><span class="dl">'</span><span class="p">,</span> <span class="nx">a_middleware_function</span><span class="p">);</span>

<span class="c1">// A middleware function added for a specific HTTP verb and route</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="nx">a_middleware_function</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p class="info"><i class="fa fa-info icon-blockquote"></i> Arriba declaramos la función middleware separadamente y la configuramos como el callback. En nuestra función previous manejadora de ruta declaramos la función callback cuando esta fué usada. En JavaScript, cuealquer aproximación es valida.</p>
</blockquote>

<p>La documentación Express tiene mucha mas documentación excelente acerca del uso y escritura de middleware Express.</p>

<h3 id="sirviendo-archivos-estáticos">Sirviendo archivos estáticos</h3>

<p>Puede utilizar el middleware <a href="http://expressjs.com/en/4x/api.html#express.static">express.static</a> para servir archivos estáticos, incluyendo sus imagenes, CSS y JavaScript (<code class="language-plaintext highlighter-rouge">static()</code> es la única función middleware que es actualmente <strong>parte</strong> de <em>Express</em>). Por ejemplo, podria utilizar la linea de abajo para servir imágenes, archivos CSS, y archivos JavaScript desde un directorio nombrado ‘<strong>public’</strong> al mismo nivel desde donde llama a node:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">public</span><span class="dl">'</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Cualesquiere archivos en el directorio público son servidos al agregar su nombre de archivo (<em>relativo</em> a la ubicación del directorio “público” ) de la ubicación URL. Por ejemplo:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>http://localhost:3000/images/dog.jpg
http://localhost:3000/css/style.css
http://localhost:3000/js/app.js
http://localhost:3000/about.html
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Puede llamar <code class="language-plaintext highlighter-rouge">static()</code> multiples ocasiones a servir multiples directorios. Si un archivo no puede ser encontrado por una función middleware entonces este simplemente será pasado en la subsequente middleware (el orden en que el middleware está basado en su orden de declaración).</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">public</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">media</span><span class="dl">'</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>También puede crear un prefijo virtual para sus URLs estáticas, aun más teniendo los archivos agregados en la ubicación URL. Por ejemplo, aqui especificamos <a href="http://expressjs.com/en/4x/api.html#app.use">a mount path</a> tal que los archivos son bajados con el prefijo “/media”:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/media</span><span class="dl">'</span><span class="p">,</span> <span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">public</span><span class="dl">'</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Ahora, puede bajar los archivos que estan en el directorio <code class="language-plaintext highlighter-rouge">publico</code> del path con prefijo <code class="language-plaintext highlighter-rouge">/media</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>http://localhost:3000/media/images/dog.jpg
http://localhost:3000/media/video/cat.mp4
http://localhost:3000/media/cry.mp3
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Para más información, ver <a href="https://expressjs.com/en/starter/static-files.html">Sirviendo archivos estáticos en Express</a>.</p>

<h3 id="manejando-errores">Manejando errores</h3>

<p>Los errores manejados por una o más funciones especiales middleware que tienen cuatro argumentos, en lugar de las usuales tres: <code class="language-plaintext highlighter-rouge">(err, req, res, next)</code>. For example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Something broke!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Estas pueden devolver cualquier contenido, pero deben ser llamadas despues de todas las otras <code class="language-plaintext highlighter-rouge">app.use()</code> llamadas de rutas tal que ellas son las últimas middleware en el proceso de manejo de request!</p>

<p>Express viene con un manejador de error integrado, el que se ocupa de error remanente que pudiera ser encontrado en la app. Esta función middleware manejador de error esta agregada al final del stack de funciones middleware. Si pasa un error a <code class="language-plaintext highlighter-rouge">next()</code> y no lo maneja en un manejador de error, este sera manejado por el manejador de error integrado; el error sera escrito en el cliente con el rastreo de pila.</p>

<blockquote>
  <p class="info"><i class="fa fa-info icon-blockquote"></i> El rastreo de pila no esta incluido en el ambiente de producción. Para ejecutarlo en modo de producción necesita configurar la variable de ambiente <code class="language-plaintext highlighter-rouge">NODE_ENV</code> to ‘<code class="language-plaintext highlighter-rouge">production'</code>.</p>

  <p>HTTP404 y otros códigos de estatus de “error” no son tratados como errores. Si quiere manejar estos, puede agregar una función middleware para hacerlo. Para mas información vea las <a href="http://expressjs.com/en/starter/faq.html#how-do-i-handle-404-responses">FAQ</a>.</p>
</blockquote>

<p>Para mayor información vea Manejo de error (Docs. Express).</p>

<h3 id="usando-bases-de-datos">Usando Bases de datos</h3>

<p>Las apps de <em>Express</em> pueden usar cualquier mecanismo de bases de datos suportadas por <em>Node</em> (<em>Express</em> en sí mismo no define ninguna conducta/requerimiento especifico adicional para administración de bases de datos). Hay muchas opciones, incluyendo PostgreSQL, MySQL, Redis, SQLite, MongoDB, etc.</p>

<p>Con el propósito de usar éste, debe primero instalar el manejador de bases de datos utilizando NPM. Por ejemplo, para instalar el manejador para el popular NoSQL MongoDB querría utilizar el comando:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>npm <span class="nb">install </span>mongodb
</pre></td></tr></tbody></table></code></pre></div></div>

<p>La base de datos por si misma puede ser instalada localmente o en un servidor de la nube. En su codigo Express requiere el manejador, conectarse a la base de datos, y entonces ejecutar operaciones crear, leer, actualizar, y borrar (CLAB). }El ejemplo de abajo (de la documentación Express documentation) muestra como puede encontrar registros en la colección “mamiferos” usando MongoDB.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">MongoClient</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">mongodb</span><span class="dl">'</span><span class="p">).</span><span class="nx">MongoClient</span><span class="p">;</span>

<span class="nx">MongoClient</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">mongodb://localhost:27017/animals</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">db</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>

  <span class="nx">db</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">mammals</span><span class="dl">'</span><span class="p">).</span><span class="nx">find</span><span class="p">().</span><span class="nx">toArray</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Otra aproximación popular es acceder a su base de datos indirectamente, via an Mapeo Objeto Relacional (“MOR”). En esta aproximación usted define sus datos como “objetos” o “modelos” y el MOR mapea estos a través del delineamiento básico de la base de datos. Esta aproximación tiene el beneficio de que como un desarrollador puede continuar pensando en términos de objetos de JavaScript mas que en semántica de bases de datos, y en esto hay un lugar obvio para ejecutar la validación y chequeo de entrada de datos. Hablaremos más de bases de datos en un artículo posterior.</p>

<p>Para más información ver <a href="https://expressjs.com/en/guide/database-integration.html">Integracion de Bases de Datos</a> (docs Express ).</p>

<h3 id="renderización-de-data-vistas">Renderización de data (vistas)</h3>

<p>El Motor de plantilla (referido como “motor de vistas” por <em>Express</em>) le permite definir la estructura de documento de salida en una plantilla, usando marcadores de posición para datos que seran llenados cuando una pagina es generada. Las plantillas son utilizadas generalmete para crear HTML, pero tambien pueden crear otros tipos de documentos. Express tiene soporte para <a href="https://github.com/expressjs/express/wiki#template-engines">numerosos motores de plantillas</a>, y hay una util comparación de los motores más populares aquí: <a href="https://strongloop.com/strongblog/compare-javascript-templates-jade-mustache-dust/">Comparando Motores de Plantillas de JavaScript: Jade, Mustache, Dust and More</a>.</p>

<p>En su código de configuración de su aplicación usted configura el motor de plantillas para usar y su localización Express podiría buscar plantillas usando las configuraciones de ‘vistas’ y ‘motores de vistas’, mostrado abajo (tendría también que instalar el paquete conteniendo su librería de plantillas!)</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="c1">// Set directory to contain the templates ('views')</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">views</span><span class="dl">'</span><span class="p">,</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">views</span><span class="dl">'</span><span class="p">));</span>

<span class="c1">// Set view engine to use, in this case 'some_template_engine_name'</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">view engine</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">some_template_engine_name</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>La apariencia de la plantilla dependera de qué motor use. Asumiendo que tiene un archivo de plantillas nombrado “index.&lt;template_extension&gt;” este contiene placeholders para variables de datos nombradas ‘title’ y “message”, podría llamar <a href="http://expressjs.com/en/4x/api.html#res.render"><code class="language-plaintext highlighter-rouge">Response.render()</code></a> en una función manejadora de rutas para crear y enviar la HTML response:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="dl">'</span><span class="s1">index</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">About dogs</span><span class="dl">'</span><span class="p">,</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Dogs rock!</span><span class="dl">'</span> <span class="p">});</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Para más información vea <a href="http://expressjs.com/en/guide/using-template-engines.html">Usando motores de plantillas con Express</a>.</p>

<h3 id="estructura-de-archivos">Estructura de Archivos</h3>

<p>Express no hace asunciones en términos de estructura o que componentes usted usa. Rutas, vistas, archivos estáticos, y otras lógicas de aplicación específica puede vivir en cualquier número de archivos con cualquier estructura de directorio. Mientras que esto es perfectamente posible, se puede tener toda la aplicación en un solo archivo, en <em>Express</em>, tipicamente esto tiene sentido al desplegar su aplicacion dentro de archivos basados en función (e.g. administracion de cuentas, blogs, tableros de discusion) y dominio de problema arquitectonico (e.g. modelo, vista or controlador si tu pasas a estar usando una <a href="https://developer.mozilla.org/es/docs/Web/Apps/Fundamentals/Modern_web_app_architecture/MVC_architecture">arquitectura MVC</a>).</p>

<p>En un tópico posterior usaremos el Generador de Aplicaciones <em>Express Application Generator</em>, el que crea un esquelo de una app modular que podemos facilmente extender para crear aplicaciones web.</p>

<h2 id="resumen">Resumen</h2>

<p>¡Felicitaciones, ha completado el primer paso en su viaje Express/Node! Ahora debes comprender los principales beneficios de Express y Node, y más o menos cómo se verían las partes principales de una aplicación Express (rutas, middleware, manejo de errores y plantillas). ¡También debe comprender que con Express como un framework unopinionated, la forma en que une estas partes y las bibliotecas que usa dependen en gran medida de usted!</p>

<p>Por supuesto, Express es deliberadamente un un framework de aplicaciones web muy ligero, por lo que gran parte de sus beneficios y potencial proviene de bibliotecas y características de terceros. Lo veremos con más detalle en los siguientes artículos. En nuestro próximo artículo, veremos cómo configurar un entorno de desarrollo de Node, para que pueda comenzar a ver código de Express en acción.</p>

<h2 id="ver-también">Ver también</h2>

<ul>
  <li><a href="https://nodejs.org/api/modules.html#modules_modules">Modules</a> (Node API docs)</li>
  <li><a href="https://expressjs.com/">Express</a> (home page)</li>
  <li><a href="http://expressjs.com/en/starter/basic-routing.html">Basic routing</a> (Express docs)</li>
  <li><a href="http://expressjs.com/en/guide/routing.html">Routing guide</a> (Express docs)</li>
  <li><a href="http://expressjs.com/en/guide/using-template-engines.html">Using template engines with Express</a> (Express docs)</li>
  <li><a href="https://expressjs.com/en/guide/using-middleware.html">Using middleware</a> (Express docs)</li>
  <li><a href="http://expressjs.com/en/guide/writing-middleware.html">Writing middleware for use in Express apps</a> (Express docs)</li>
  <li><a href="https://expressjs.com/en/guide/database-integration.html">Database integration</a> (Express docs)</li>
  <li><a href="https://expressjs.com/en/starter/static-files.html">Serving static files in Express</a> (Express docs)</li>
  <li><a href="http://expressjs.com/en/guide/error-handling.html">Error handling</a> (Express docs)</li>
</ul>


          </div>
         </div>
        </div>
      </div>
     </section>
    </div>
<!-- body overlay -->
    <footer id="footer">
      <div class="container">
        <!-- Attribution -->
        <div class="attribution">
          <a rel="license" href="http://creativecoms.org/licenses/by-sa/4.0/">
            <img alt="Licencia de Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" />
          </a>
          <br />Todo el material de esta web está bajo una <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">licencia de Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional</a>.

        </div>
        <div class="attribution">
          <a
            href="https://github.com/CommunityPro/portfolio-html"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img
              src="https://user-images.githubusercontent.com/62628408/157202263-9174da24-b19a-4017-9b7c-a1d26ae8f014.svg"
              alt="attribution"
              width="150px"
            />
          </a>
        </div>
      </div>
    </footer>
    <a href="#top" id='back-to-top-link'><i class='fa fa-angle-up'></i></a>
  
    <script src="/node-express-library-teoria/assets/js/webfont.js"></script>
    <script src="/node-express-library-teoria/assets/js/snap.svg-min.js"></script>   
    <script src="/node-express-library-teoria/assets/js/underscore-min.js"></script>
    <script src="/node-express-library-teoria/assets/js/sequence-diagram-min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script src="/node-express-library-teoria/assets/js/raphael.min.js"></script>
    <script src="/node-express-library-teoria/assets/js/flowchart-latest.js"></script>    
    <script src="/node-express-library-teoria/assets/js/main.js"></script>
    <script src="/node-express-library-teoria/assets/js/script.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
      <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-56FXN2KND3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-56FXN2KND3');
  </script>
  

  </body>
</html>

