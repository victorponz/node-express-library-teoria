I"ò<p>En este primer articulo de Express resolveremos las preguntas ‚Äú¬øQu√© es Node?‚Äù y ‚Äú¬øQu√© es Express?‚Äù, y te daremos una visi√≥n general de que hace especial al framework web ‚ÄúExpress‚Äù. Delinearemos las caracter√≠sticas principales, y te mostraremos algunos de los principales bloques de construcci√≥n de una aplicaci√≥n en Express (aunque en este punto no tendr√°s todav√≠a un entorno de desarrollo en que probarlo).</p>

<table>
  <tbody>
    <tr>
      <th scope="row">Pre-requisitos:</th>
      <td>
        <p>
          Conocimientos b√°sicos de inform√°tica. Noci√≥n general sobre
          <a href="https://developer.mozilla.org/es/docs/Learn/Server-side/Primeros_pasos">programaci√≥n lado servidor de sitios web</a>, y en particular los mecanismos de las interacciones
          <a href="/es/docs/Learn/Server-side/Primeros_pasos/Vision_General_Cliente_Servidor">cliente-servidor en sitios web</a>.
        </p>
      </td>
    </tr>
    <tr>
      <th scope="row">Objetivo:</th>
      <td>
        <p>
          Ganar familiaridad con lo que es Express y c√≥mo encaja con Node, qu√©
          funcionalidad proporciona y los pilares de construcci√≥n de una
          aplicaci√≥n Express.
        </p>
      </td>
    </tr>
  </tbody>
</table>

<h2 id="instalaci√≥n-de-node">Instalaci√≥n de node</h2>

<p>Para instalar <code class="language-plaintext highlighter-rouge">node.js</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>sudo apt install nodejs
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Y para instalar el gestor de paquetes <code class="language-plaintext highlighter-rouge">nmp</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>sudo apt install npm
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Adem√°s vamos a instalar <code class="language-plaintext highlighter-rouge">nodemon</code>  para que rearranque autom√°ticamente el servidor al realizar cualquier cambio en un archivo de la aplicaci√≥n.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>sudo npm install -g nodemon
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="qu√©-son-express-y-node">¬øQu√© son Express y Node?</h2>

<p><a href="https://nodejs.org/">Node</a> (o m√°s correctamente: <em>Node.js</em>) es un entorno que trabaja en tiempo de ejecuci√≥n, de c√≥digo abierto, multi-plataforma, que permite a los desarrolladores crear toda clase de herramientas de lado servidor y aplicaciones en <a href="https://developer.mozilla.org/es/docs/Glossary/JavaScript">JavaScript</a>. La ejecuci√≥n en tiempo real est√° pensada para usarse fuera del contexto de un explorador web (es decir, ejecutarse directamente en una computadora o sistema operativo de servidor). Como tal, el entorno omite las APIs de JavaScript espec√≠ficas del explorador web y a√±ade soporte para APIs de sistema operativo m√°s tradicionales que incluyen HTTP y bibliotecas de sistemas de ficheros.</p>

<p>Desde una perspectiva de desarrollo de servidor web, Node tiene un gran n√∫mero de ventajas:</p>

<ul>
  <li>¬°Gran rendimiento! <em>Node</em> ha sido dise√±ado para optimizar el rendimiento y la escalabilidad en aplicaciones web y es un muy buen complemento para muchos problemas comunes de desarrollo web (ej, aplicaciones web en tiempo real).</li>
  <li>El c√≥digo est√° escrito en ‚Äúsimple JavaScript‚Äù, lo que significa que se pierde menos tiempo ocup√°ndose de las ‚Äúconmutaciones de contexto‚Äù entre lenguajes cuando est√°s escribiendo tanto el c√≥digo del explorador web como del servidor.</li>
  <li>JavaScript es un lenguaje de programaci√≥n relativamente nuevo y se beneficia de los avances en dise√±o de lenguajes cuando se compara con otros lenguajes de servidor web tradicionales (ej, Python, PHP, etc.) Muchos otros lenguajes nuevos y populares se compilan/convierten a JavaScript de manera que puedes tambi√©n usar CoffeeScript, ClosureScript, Scala, LiveScript, etc.</li>
  <li>El gestor de paquetes de <em>Node</em> (NPM del ingl√©s: Node Packet Manager) proporciona acceso a cientos o miles de paquetes reutilizables. Tiene adem√°s la mejor en su clase resoluci√≥n de dependencias y puede usarse para automatizar la mayor parte de la cadena de herramientas de compilaci√≥n.</li>
  <li>Es portable, con versiones que funcionan en Microsoft Windows, OS X, Linux, Solaris, FreeBSD, OpenBSD, WebOS, y NonStop OS. Adem√°s, est√° bien soportado por muchos de los proveedores de hospedaje web, que proporcionan infraestructura espec√≠fica y documentaci√≥n para hospedaje de sitios <em>Node</em>.</li>
  <li>Tiene un ecosistema y comunidad de desarrolladores de terceros muy activa, con cantidad de gente deseosa de ayudar.</li>
</ul>

<p>Puedes crear de forma sencilla un servidor web b√°sico para responder cualquier petici√≥n simplemente usando el paquete HTTP de <em>Node</em>, como se muestra abajo. Este, crear√° un servidor y escuchar√° cualquier clase de peticiones en la URL <code class="language-plaintext highlighter-rouge">http://127.0.0.1:8000/</code>; cuando se reciba una petici√≥n, se responder√° enviando en texto la respuesta: ‚ÄúHola Mundo!‚Äù.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="c1">// Se carga el m√≥dulo de HTTP</span>
<span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">http</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Creaci√≥n del servidor HTTP, y se define la escucha</span>
<span class="c1">// de peticiones en el puerto 8000</span>
<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>

   <span class="c1">// Se define la cabecera HTTP, con el estado HTTP (OK: 200) y el tipo de contenido</span>
   <span class="nx">response</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text/plain</span><span class="dl">'</span><span class="p">});</span>

   <span class="c1">// Se responde, en el cuerpo de la respuesta con el mensaje "Hello World"</span>
   <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hola Mundo!</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8000</span><span class="p">);</span>

<span class="c1">// Se escribe la URL para el acceso al servidor</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Servidor en la url http://127.0.0.1:8000/</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Otras tareas comunes de desarrollo web no est√°n directamente soportadas por el mismo <em>Node</em>. Si quieres a√±adir el manejo espec√≠fico de diferentes verbos HTTP (ej, <code class="language-plaintext highlighter-rouge">GET</code>, <code class="language-plaintext highlighter-rouge">POST</code>, <code class="language-plaintext highlighter-rouge">DELETE</code>, etc.), gestionar de forma separada las peticiones por medio de diferentes direcciones URL (‚Äúrutas‚Äù), servir ficheros est√°ticos o usar plantillas para crear la respuesta de forma din√°mica, necesitar√°s escribir el c√≥digo por t√≠ mismo, o ¬°puedes evitar reinventar la rueda usando un framework web!</p>

<p><a href="https://expressjs.com/">Express</a> es el framework web m√°s popular de <em>Node</em>, y es la librer√≠a subyacente para un gran n√∫mero de otros <a href="https://expressjs.com/en/resources/frameworks.html">frameworks web de Node</a> populares. Proporciona mecanismos para:</p>

<ul>
  <li>Escritura de manejadores de peticiones con diferentes verbos HTTP en diferentes caminos URL (rutas).</li>
  <li>Integraci√≥n con motores de renderizaci√≥n de ‚Äúvistas‚Äù para generar respuestas mediante la introducci√≥n de datos en plantillas.</li>
  <li>Establecer ajustes de aplicaciones web como qu√© puerto usar para conectar, y la localizaci√≥n de las plantillas que se utilizan para renderizar la respuesta.</li>
  <li>A√±adir procesamiento de peticiones ‚Äúmiddleware‚Äù adicional en cualquier punto dentro de la tuber√≠a de manejo de la petici√≥n.</li>
</ul>

<p>A pesar de que <em>Express</em> es en s√≠ mismo bastante minimalista, los desarrolladores han creado paquetes de middleware compatibles para abordar casi cualquier problema de desarrollo web. Hay librer√≠as para trabajar con cookies, sesiones, inicios de sesi√≥n de usuario, par√°metros URL, datos <code class="language-plaintext highlighter-rouge">POST</code>, cabeceras de seguridad y <em>muchos</em> m√°s. Puedes encontrar una lista de paquetes middleware mantenida por el equipo de Express en <a href="https://expressjs.com/es/resources/middleware.html">Express Middleware</a> (junto con una lista de algunos de los paquetes m√°s populares de terceros).</p>

<blockquote>
  <p>-info-Esta flexibilidad es una espada de doble filo. Hay paquetes de middleware para abordar casi cualquier problema o requerimiento, pero deducir cu√°les son los paquetes adecuados a usar algunas veces puede ser un aut√©ntico reto. Tampoco hay una ‚Äúforma correcta‚Äù de estructurar una aplicaci√≥n, y muchos ejemplos que puedes encontrar en la Internet no son √≥ptimos, o s√≥lo muestran una peque√±a parte de lo que necesitas hacer para desarrollar una aplicaci√≥n web.</p>
</blockquote>

<h2 id="d√≥nde-comenz√≥">¬øD√≥nde comenz√≥?</h2>

<p><em>Node</em> fu√© lanzado inicialmente, s√≥lo para Linux, en 2009. El gestor de paquetes NPM fu√© lanzado en 2010, y el soporte nativo para Windows fue a√±adido en 2012. La versi√≥n actual LTS (Long Term Suppport) es Node v12.18.0 mientras que la √∫ltima versi√≥n es Node 14.4.0. √âsto es s√≥lo una peque√±a foto de una historia muy rica; profundiza en <a href="https://en.wikipedia.org/wiki/Node.js#History">Wikipedia</a> si quieres saber m√°s).</p>

<p><em>Express</em> fue lanzado inicialmente en Noviembre de 2010 y est√° ahora en la versi√≥n 4.17.1 de la API. Puedes comprobar en el <a href="https://expressjs.com/en/changelog/4x.html">changelog</a> la informaci√≥n sobre cambios en la versi√≥n actual, y en <a href="https://github.com/expressjs/express/blob/master/History.md">GitHub</a> notas de lanzamiento hist√≥ricas m√°s detalladas.</p>

<h2 id="qu√©-popularidad-tiene-nodeexpress">¬øQu√© popularidad tiene Node/Express?</h2>

<p>La popularidad de un framework web es importante porque es un indicador de se continuar√° manteniendo y qu√© recursos tienen m√°s probabilidad de estar disponibles en t√©rminos de documentaci√≥n, librer√≠as de extensiones y soporte t√©cnico.</p>

<p>No existe una medida disponible de inmediato y definitiva de la popularidad de los frameworks de lado servidor (aunque sitios como <a href="http://hotframeworks.com/">Hot Frameworks</a> intentan asesorar sobre popularidad usando mecanismos como contar para cada plataforma el n√∫mero de preguntas sobre proyectos en GitHub y StackOverflow). Una pregunta mejor es si Node y Express son lo ‚Äúsuficientemente populares‚Äù para evitar los problemas de las plataformas menos populares. ¬øContin√∫an evolucionando? ¬øPuedes conseguir la ayuda que necesitas? ¬øHay alguna posibilidad de que consigas un trabajo remunerado si aprendes Express?</p>

<p>De acuerdo con el n√∫mero de <a href="https://expressjs.com/en/resources/companies-using-express.html">compa√±√≠as de perfil alto</a> que usan Express, el n√∫mero de gente que contribuye al c√≥digo base, y el n√∫mero de gente que proporciona soporte tanto libre como pagado, podemos entonces decir que s√≠, !<em>Express</em> es un framework popular!</p>

<h2 id="es-express-dogm√°tico">¬øEs Express dogm√°tico?</h2>

<p>Los frameworks web frecuentemente se refieren a s√≠ mismos como ‚Äúdogm√°ticos‚Äù (‚Äú<em>opinionated</em>‚Äù) o ‚Äúno dogm√°ticos‚Äù (‚Äú<em>unopinionated</em>‚Äù).</p>

<p>Los frameworks dogm√°ticos son aquellos que opinan acerca de la ‚Äúmanera correcta‚Äù de gestionar cualquier tarea en particular. Ofrecen soporte para el desarrollo r√°pido en un <em>dominio en particular</em> (resolver problemas de un tipo en particular) porque la manera correcta de hacer cualquier cosa est√° generalmente bien comprendida y bien documentada. Sin embargo pueden ser menos flexibles para resolver problemas fuera de su dominio principal, y tienden a ofrecer menos opciones para elegir qu√© componentes y enfoques pueden usarse.</p>

<p>Los framewoks no dogm√°ticos, en contraposici√≥n, tienen muchas menos restricciones sobre el modo mejor de unir componentes para alcanzar un objetivo, o incluso qu√© componentes deber√≠an usarse. Hacen m√°s f√°cil para los desarrolladores usar las herramientas m√°s adecuadas para completar una tarea en particular, si bien al coste de que necesitas encontrar esos componentes por t√≠ mismo.</p>

<p>Express es no dogm√°tico, transigente. Puedes insertar casi cualquier middleware compatible que te guste dentro de la cadena de manejo de la petici√≥n, en casi cualquier orden que te apetezca. Puedes estructurar la app en un fichero o m√∫ltiples ficheros y usar cualquier estructura de directorios. ¬°Algunas veces puedes sentir que tienes demasiadas opciones!</p>

<h2 id="c√≥mo-es-el-c√≥digo-para-express">¬øC√≥mo es el c√≥digo para Express?</h2>

<p>En sitios web o aplicaciones web din√°micas, que accedan a bases de datos, el servidor espera a recibir peticiones HTTP del navegador (o cliente). Cuando se recibe una petici√≥n, la aplicaci√≥n determina cu√°l es la acci√≥n adecuada correspondiente, de acuerdo a la estructura de la URL y a la informaci√≥n (opcional) indicada en la petici√≥n con los m√©todos <code class="language-plaintext highlighter-rouge">POST</code> o <code class="language-plaintext highlighter-rouge">GET</code>. Dependiendo de la acci√≥n a realizar, puede que se necesite leer o escribir en la base de datos, o realizar otras acciones necesarias para atender la petici√≥n correctamente. La aplicaci√≥n ha de responder al navegador, normalmente, creando una p√°gina HTML din√°micamente para √©l, en la que se muestre la informaci√≥n pedida, usualmente dentro de un elemento especifico para este fin, en una plantilla HTML.</p>

<p><em>Express</em> posee m√©todos para especificar que funci√≥n ha de ser llamada dependiendo del verbo HTTP usado en la petici√≥n (<code class="language-plaintext highlighter-rouge">GET</code>, <code class="language-plaintext highlighter-rouge">POST</code>, <code class="language-plaintext highlighter-rouge">SET</code>, etc.) y la estructura de la URL (‚Äúruta‚Äù). Tambi√©n tiene los m√©todos para especificar que plantilla (‚Äúview‚Äù) o gestor de visualizaci√≥n utilizar, donde est√°n guardadas las plantillas de HTML que han de usarse y como generar la visualizaci√≥n adecuada para cada caso. El middleware de <em>Express</em>, puede usarse tambi√©n para a√±adir funcionalidades para la gesti√≥n de cookies, sesiones y usuarios, mediante el uso de par√°metros, en los m√©todos <code class="language-plaintext highlighter-rouge">POST</code>/<code class="language-plaintext highlighter-rouge">GET</code>. Puede utilizarse adem√°s cualquier sistema de trabajo con bases de datos, que sea soportado por <em>Node</em> (<em>Express</em> no especifica ning√∫n m√©todo preferido para trabajar con bases de datos).</p>

<p>En las siguientes secciones, se explican algunos puntos comunes que se pueden encontrar cuando se trabaja con c√≥digo de <em>Node</em> y <em>Express</em>.</p>

<h3 id="hola-mundo---en-express">Hola Mundo! - en Express</h3>

<p>Primero consideremos el tradicional ejemplo de <a href="https://expressjs.com/en/starter/hello-world.html">Hola Mundo!</a> (se comentar√° cada parte a continuaci√≥n).</p>

<blockquote>
  <p>-info- Si tiene <em>Node</em> y <em>Express</em> instalado (o piensa instalarlos posteriormente) puede guardar este c√≥digo en un archivo llamado <strong>app.js</strong> y ejecutarlo posteriormente en la linea de comandos invoc√°ndolo mediante: <code class="language-plaintext highlighter-rouge">node app.js</code>.</p>
</blockquote>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hola Mundo!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Aplicaci√≥n ejemplo, escuchando el puerto 3000!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Las primeras dos l√≠neas incluyen (mediante la orden <code class="language-plaintext highlighter-rouge">require()</code>) el m√≥dulo de Express y crean una <a href="https://expressjs.com/en/4x/api.html#app">aplicaci√≥n de Express</a>. Este elemento se denomina com√∫nmente <code class="language-plaintext highlighter-rouge">app</code>, y posee m√©todos para el enrutamiento de las peticiones HTTP, configuraci√≥n del ‚Äòmiddleware‚Äô, y visualizaci√≥n de las vistas de HTML, uso del motores de ‚Äòtemplates‚Äô, y gesti√≥n de las <a href="https://expressjs.com/en/4x/api.html#app.settings.table">configuraciones de las aplicaciones</a> que controlan la aplicaci√≥n (por ejemplo el entorno, las definiciones para enrutado ‚Ä¶ etcetera.)</p>

<p>Las l√≠neas que siguen en el c√≥digo (las tres l√≠neas que comienzan con <code class="language-plaintext highlighter-rouge">app.get</code>) muestran una definici√≥n de ruta que se llamar√° cuando se reciba una petici√≥n HTTP <code class="language-plaintext highlighter-rouge">GET</code> con una direcci√≥n (<code class="language-plaintext highlighter-rouge">'/'</code>) relativa al directorio ra√≠z. La funci√≥n ‚Äòcallback‚Äô coge una petici√≥n y una respuesta como argumentos, y ejecuta un <a href="https://expressjs.com/en/4x/api.html#res.send"><code class="language-plaintext highlighter-rouge">send()</code></a> en la respuesta, para enviar la cadena de caracteres: ‚ÄúHola Mundo!‚Äù.</p>

<p>El bloque final de c√≥digo, define y crea el servidor, escuchando el puerto 3000 e imprime un comentario en la consola. Cuando se est√° ejecutando el servidor, es posible ir hasta la direcci√≥n <code class="language-plaintext highlighter-rouge">localhost:3000</code> en un navegador, y ver como el servidor de este ejemplo devuelve el mensaje de respuesta.</p>

<h3 id="importando-y-creando-m√≥dulos">Importando y creando m√≥dulos</h3>

<p>Un modulo es una librer√≠a o archivo JavaScript que puede ser importado dentro de otro c√≥digo utilizando la funci√≥n <code class="language-plaintext highlighter-rouge">require()</code> de Node. Por s√≠ mismo, <em>Express</em> es un modulo, como lo son el middleware y las librer√≠as de bases de datos que se utilizan en las aplicaciones <em>Express.</em></p>

<p>El c√≥digo mostrado abajo, muestra como puede importarse un modulo con base a su nombre, como ejemplo se utiliza el framework <em>Express</em> . Primero se invoca la funci√≥n <code class="language-plaintext highlighter-rouge">require()</code>, indicando como par√°metro el nombre del m√≥dulo o librer√≠a como una cadena (<code class="language-plaintext highlighter-rouge">'express'</code>), posteriormente se invoca el objeto obtenido para crear una <a href="https://expressjs.com/en/4x/api.html#app">aplicaci√≥n Express</a>.</p>

<p>Posteriormente, se puede acceder a las propiedades y funciones del objeto Aplicaci√≥n.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Tambi√©n podemos crear nuestros propios m√≥dulos que puedan posteriormente ser importados de la misma manera.</p>

<blockquote>
  <p>-info-Usted puede desear crear sus propios m√≥dulos, esto le permitir√° organizar su c√≥digo en partes m√°s administrables; una aplicaci√≥n que reside en un solo archivo es dif√≠cil de entender y manejar.El utilizar m√≥dulos independientes tambi√©n le permite administrar el espacio de nombres, de esta manera unicamente las variables que exporte expl√≠citamente son importadas cuando utilice un m√≥dulo.</p>
</blockquote>

<p>Para hacer que los objetos esten disponibles fuera de un modulo, solamente es necesario asignarlos al objeto <code class="language-plaintext highlighter-rouge">exports</code>. Por ejemplo, el modulo mostrado a continuaci√≥n <strong>square.js</strong> es un archivo que exporta los m√©todos <code class="language-plaintext highlighter-rouge">area()</code> y <code class="language-plaintext highlighter-rouge">perimeter()</code> :</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nx">exports</span><span class="p">.</span><span class="nx">area</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">width</span> <span class="o">*</span> <span class="nx">width</span><span class="p">;</span> <span class="p">};</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">perimeter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">4</span> <span class="o">*</span> <span class="nx">width</span><span class="p">;</span> <span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Nosotros podemos importar este m√≥dulo utilizando la funci√≥n <code class="language-plaintext highlighter-rouge">require()</code>, y entonces podremos invocar los m√©todos exportados de la siguiente manera:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c1">// Utilizamos la funci√≥n require() El nombre del archivo se ingresa sin la extensi√≥n (opcional) .js</span>
<span class="kd">var</span> <span class="nx">square</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./square</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// invocamos el metodo area()</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">El √°rea de un cuadrado con lado de 4 es </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">square</span><span class="p">.</span><span class="nx">area</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>-info- Usted tambi√©n puede especificar una ruta absoluta a la ubicaci√≥n del m√≥dulo (o un nombre como se realiz√≥ inicialmente).</p>
</blockquote>

<p>Si usted desea exportar completamente un objeto en una asignaci√≥n en lugar de construir cada propiedad por separado, debe asignarlo al m√≥dulo <code class="language-plaintext highlighter-rouge">module.exports</code> como se muestra a continuaci√≥n (tambi√©n puede hacer esto al inicio de un constructor o de otra funci√≥n.)</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">area</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">width</span> <span class="o">*</span> <span class="nx">width</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="na">perimeter</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">4</span> <span class="o">*</span> <span class="nx">width</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Para m√°s informaci√≥n acerca de m√≥dulos vea <a href="https://nodejs.org/api/modules.html#modules_modules">Modulos</a> (<em>Node</em> API docs).</p>

<h3 id="usando-apis-as√≠ncronas">Usando APIs as√≠ncronas</h3>

<p>El c√≥digo JavaScript usa frecuentemente APIs as√≠ncronas antes que sincr√≥nicas para operaciones que tomen alg√∫n tiempo en completarse. En una API sincr√≥nica cada operaci√≥n debe completarse antes de que la siguiente pueda comenzar. Por ejemplo, la siguiente funci√≥n de registro es s√≠ncrona, y escribir√° en orden el texto en la consola (Primero, Segundo).</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Primero</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Segundo</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>En contraste, en una API asincr√≥nica, la API comenzar√° una operaci√≥n e inmediatamente retornar√° (antes de que la operaci√≥n se complete). Una vez que la operaci√≥n finalice, la API usar√° alg√∫n mecanismo para realizar operaciones adicionales. Por ejemplo, el c√≥digo de abajo imprimir√° ‚ÄúSegundo, Primero‚Äù porque aunque el m√©todo <code class="language-plaintext highlighter-rouge">setTimeout()</code> es llamado primero y retorna inmediatamente, la operaci√≥n no se completa por varios segundos.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Primero</span><span class="dl">'</span><span class="p">);</span>
   <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Segundo</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Usar APIs as√≠ncronas sin bloques es aun mas importante en <em>Node</em> que en el navegador, porque <em>Node</em> es un entorno de ejecuci√≥n controlado por eventos de un solo hilo. ‚ÄúUn solo hilo‚Äù quiere decir que todas las peticiones al servidor son ejecutadas en el mismo hilo ( en vez de dividirse en procesos separados). Este modelo es extremadamente eficiente en t√©rminos de velocidad y recursos del servidor, pero eso significa que si alguna de sus funciones llama a m√©todos sincr√≥nicos que tomen demasiado tiempo en completarse, bloquearan no solo la solicitud actual, sino tambi√©n cualquier otra petici√≥n que este siendo manejada por tu aplicaci√≥n web.</p>

<p>Hay muchas maneras para una API asincr√≥nica de notificar a su aplicaci√≥n que se ha completado. La manera mas com√∫n es registrar una funci√≥n callback cuando usted invoca a una API asincr√≥nica, la misma ser√° llamada de vuelta cuando la operaci√≥n se complete. √âste es el enfoque utilizado anteriormente.</p>

<blockquote>
  <p>-info- Usar ‚Äúcallbacks‚Äù puede ser un poco enmara√±ado si usted tiene una secuencia de operaciones as√≠ncronas dependientes que deben ser llevadas a cabo en orden, porque esto resulta en m√∫ltiples niveles de ‚Äúcallbacks‚Äù anidadas. Este problema es com√∫nmente conocido como ‚Äúcallback hell‚Äù (callback del infierno). Este problema puede ser reducido con buenas practicas de c√≥digo (vea <a href="http://callbackhell.com/">http://callbackhell.com/</a>), usando un modulo como <a href="https://www.npmjs.com/package/async">async</a>, o incluso avanzando a caracter√≠sticas de ES6 como las <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Promise">promesas</a>.</p>
</blockquote>

<blockquote>
  <p>-info-Una convenci√≥n com√∫n para <em>Node</em> y <em>Express</em> es usar callbacks de error primero. En esta convenci√≥n el primer valor en su funci√≥n callback es un error, mientras que los argumentos subsecuentes contienen datos correctos. Hay una buena explicaci√≥n de porque este enfoque es √∫til en este blog: <a href="http://fredkschott.com/post/2014/03/understanding-error-first-callbacks-in-node-js">The Node.js Way - Understanding Error-First Callbacks</a> (fredkschott.com).</p>
</blockquote>

<h3 id="creando-manejadores-de-rutas">Creando manejadores de rutas</h3>

<p>En nuestro ejemplo anterior de ‚ÄúHola Mundo!‚Äù en <em>Express</em> (v√©ase mas arriba), definimos una funci√≥n (callback) manejadora de ruta para peticiones HTTP <code class="language-plaintext highlighter-rouge">GET</code> a la ra√≠z del sitio (<code class="language-plaintext highlighter-rouge">'/'</code>).</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello World!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>La funci√≥n callback toma una petici√≥n y una respuesta como argumentos. En este caso el m√©todo simplemente llama a <a href="https://expressjs.com/en/4x/api.html#res.send"><code class="language-plaintext highlighter-rouge">send()</code></a> en la respuesta para retornar la cadena ‚ÄúHello World!‚Äù. Hay un <a href="https://expressjs.com/en/guide/routing.html#response-methods">n√∫mero de otros m√©todos de respuesta</a> para finalizar el ciclo de solicitud/respuesta, por ejemplo podr√° llamar a <a href="https://expressjs.com/en/4x/api.html#res.json"><code class="language-plaintext highlighter-rouge">res.json()</code></a> para enviar una respuesta JSON o <a href="https://expressjs.com/en/4x/api.html#res.sendFile"><code class="language-plaintext highlighter-rouge">res.sendFile()</code></a> para enviar un archivo.</p>

<blockquote>
  <p>-info- Usted puede utilizar cualquier nombre que quiera para los argumentos en las funciones callback; cuando la callback es invocada el primer argumento siempre sera la petici√≥n y el segundo siempre sera la respuesta. Tiene sentido nombrarlos de manera que pueda identificar el objeto con el que esta trabajando en el cuerpo de la callback.</p>
</blockquote>

<p>El objeto que representa una aplicaci√≥n de <em>Express</em>, tambi√©n posee m√©todos para definir los manejadores de rutas para el resto de los verbos HTTP: <code class="language-plaintext highlighter-rouge">post()</code>, <code class="language-plaintext highlighter-rouge">put()</code>, <code class="language-plaintext highlighter-rouge">delete()</code>, <code class="language-plaintext highlighter-rouge">options()</code>, <code class="language-plaintext highlighter-rouge">trace()</code>, <code class="language-plaintext highlighter-rouge">copy()</code>, <code class="language-plaintext highlighter-rouge">lock()</code>, <code class="language-plaintext highlighter-rouge">mkcol()</code>, <code class="language-plaintext highlighter-rouge">move()</code>, <code class="language-plaintext highlighter-rouge">purge()</code>, <code class="language-plaintext highlighter-rouge">propfind()</code>, <code class="language-plaintext highlighter-rouge">proppatch()</code>, <code class="language-plaintext highlighter-rouge">unlock()</code>, <code class="language-plaintext highlighter-rouge">report()</code>, <code class="language-plaintext highlighter-rouge">mkactivity()</code>, <code class="language-plaintext highlighter-rouge">checkout()</code>, <code class="language-plaintext highlighter-rouge">merge()</code>, <code class="language-plaintext highlighter-rouge">m-search()</code>, <code class="language-plaintext highlighter-rouge">notify()</code>, <code class="language-plaintext highlighter-rouge">subscribe()</code>, <code class="language-plaintext highlighter-rouge">unsubscribe()</code>, <code class="language-plaintext highlighter-rouge">patch()</code>, <code class="language-plaintext highlighter-rouge">search()</code>, y <code class="language-plaintext highlighter-rouge">connect()</code>.</p>

<p>Hay un m√©todo general para definir las rutas: <code class="language-plaintext highlighter-rouge">app.all()</code>, el cual ser√° llamado en respuesta a cualquier m√©todo HTTP. Se usa para cargar funciones del middleware en una direcci√≥n particular para todos los m√©todos de peticiones. El siguiente ejemplo (de la documentaci√≥n de <em>Express</em>) muestra el uso de los manejadores a <code class="language-plaintext highlighter-rouge">/secret</code> sin tener en cuenta el verbo HTTP utilizado (siempre que est√© definido por el <a href="https://nodejs.org/api/http.html#http_http_methods">m√≥dulo http</a>).</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="dl">'</span><span class="s1">/secret</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Accediendo a la seccion secreta ...</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span> <span class="c1">// pasa el control al siguiente manejador</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Las rutas le permiten igualar patrones particulares de caracteres en la URL, y extraer algunos valores de ella y pasarlos como par√°metros al manejador de rutas (como atributo del objeto petici√≥n pasado como par√°metro).</p>

<p>Usualmente es √∫til agrupar manejadores de rutas para una parte del sitio juntos y accederlos usando un prefijo de ruta en com√∫n. (Ej: un sitio con una Wiki podr√≠a tener todas las rutas relacionadas a dicha secci√≥n en un archivo y siendo accedidas con el prefijo de ruta /wiki/. En <em>Express</em> esto se logra usando el objeto <a href="http://expressjs.com/en/guide/routing.html#express-router"><code class="language-plaintext highlighter-rouge">express.Router</code></a>. Ej: podemos crear nuestra ruta wiki en un m√≥dulo llamado wiki.js, y entonces exportar el objeto <code class="language-plaintext highlighter-rouge">Router</code>, como se muestra debajo:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="c1">// wiki.js - Modulo de rutas Wiki</span>

<span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="c1">// Home page route</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">P√°gina de inicio Wiki</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// About page route</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/about</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Acerca de esta wiki</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>-info-Agregar rutas al objeto <code class="language-plaintext highlighter-rouge">Router</code> es como agregar rutas al objeto <code class="language-plaintext highlighter-rouge">app</code> (como se vio anteriormente).</p>
</blockquote>

<p>Para usar el router en nuestro archivo app principal, necesitamos <code class="language-plaintext highlighter-rouge">require()</code> el m√≥dulo de rutas (<strong>wiki.js</strong>), entonces llame <code class="language-plaintext highlighter-rouge">use()</code> en la aplicaci√≥n <em>Express</em> para agregar el Router al software intermediario que maneja las rutas. Las dos rutas ser√°n accesibles entonces desde <code class="language-plaintext highlighter-rouge">/wiki/</code> y <code class="language-plaintext highlighter-rouge">/wiki/about/</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">wiki</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./wiki.js</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/wiki</span><span class="dl">'</span><span class="p">,</span> <span class="nx">wiki</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Le mostraremos mucho m√°s sobre como trabajar con rutas, y en particular, acerca de como usar el <code class="language-plaintext highlighter-rouge">Router</code>, m√°s adelante en la secci√≥n <a href="https://developer.mozilla.org/es/docs/es/docs/Learn/Server-side/Express_Nodejs/routes">Rutas y controladores .</a></p>

<h3 id="usando-middleware">Usando middleware</h3>

<p>El ‚Äúmiddleware‚Äù es ampliamente utilizado en las aplicaciones de <em>Express:</em> desde tareas para servir archivos est√°ticos, a la gesti√≥n de errores o la compresi√≥n de las respuestas HTTP. Mientras las funciones de enrutamiento, con el objeto <a href="http://expressjs.com/en/guide/routing.html#express-router">express.Router</a>, se encargan del ciclo petici√≥n-respuesta, al gestionar la respuesta adecuada al cliente, las funciones de middleware normalmente realizan alguna operaci√≥n al gestionar una petici√≥n o respuesta y a continuaci√≥n llaman a la siguiente funci√≥n en la ‚Äúpila‚Äù, que puede ser otra funci√≥n de middleware u otra funci√≥n de enrutamiento. El orden en el que las funciones de middleware son llamadas depende del desarrollador de la aplicaci√≥n.</p>

<blockquote>
  <p>-info-El middleware puede realizar cualquier operaci√≥n: hacer cambios a una petici√≥n, ejecutar c√≥digo, realizar cambios a la petici√≥n o al objeto pedido, puede tambi√©n finalizar el ciclo de petici√≥n-respuesta. Si no finaliza el ciclo debe llamar a la funci√≥n <code class="language-plaintext highlighter-rouge">next()</code> para pasar el control de la ejecuci√≥n a la siguiente funci√≥n del middleware ( o a la petici√≥n quedar√≠a esperando una respuesta ‚Ä¶ ).</p>
</blockquote>

<p>La mayor√≠a de las aplicaciones usan middleware desarrollado por terceras partes, para simplificar funciones habituales en el desarrollo web, como puede ser: gesti√≥n de cookies, sesiones, autentificado de usuarios, peticiones <code class="language-plaintext highlighter-rouge">POST</code> y datos en JSON, registros de eventos, etc. Puede encontrar en el siguiente enlace una <a href="http://expressjs.com/en/resources/middleware.html">lista de middleware mantenido por el equipo de <em>Express</em></a> (que tambi√©n incluye otros paquetes populares de terceras partes). Las librer√≠as de <em>Express</em> est√°n disponibles con la aplicaci√≥n NPM (Node Package Manager).</p>

<p>Para usar estas colecciones, primero ha de instalar la aplicaci√≥n usando NPM. Por ejemplo para instalar el registro de peticiones HTTP <a href="http://expressjs.com/en/resources/middleware/morgan.html">morgan</a>, se har√≠a con el comando Bash:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>npm <span class="nb">install </span>morgan
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Entonces podr√≠a llamar a la funci√≥n <code class="language-plaintext highlighter-rouge">use()</code> en un objeto de aplicaci√≥n <em>Express</em> para utilizar este middleware a su aplicaci√≥n.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">morgan</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">logger</span><span class="p">(</span><span class="dl">'</span><span class="s1">dev</span><span class="dl">'</span><span class="p">));</span>
<span class="p">...</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>-info-Las funciones Middleware y routing son llamadas en el orden que son declaradas. Para algunos middleware el orden es importante (por ejemplo si el middleware de sesion depende del middleware de cookie, entonces el manejador de cookie tiene que ser llamado antes). Casi siempre es el caso que el middleware es llamado antes de configurar las rutas, o tu manejador de rutas no tendra acceso a la funcionalidad agregada por tu middleware.</p>
</blockquote>

<p>Tu puedes escribir tu propia funcion middleware, y si quieres hacerlo as√≠ (solo para crear c√≥digo de manejo de error). La √∫nica diferencia entre una funci√≥n middleware y un callback manejador de rutas es que las funciones middleware tienen un tercer argumento <code class="language-plaintext highlighter-rouge">next</code>, cuyas funciones middleware son esperadas para llamarlas si ellas no completan el ciclo request (cuando la funci√≥n midleware es llamada, esta contiene la pr√≥xima funci√≥n que debe ser llamada).</p>

<p>Puede agregar una funci√≥n middleware a la cadenan de procesamiento con cualquier <code class="language-plaintext highlighter-rouge">app.use()</code> o <code class="language-plaintext highlighter-rouge">app.add()</code>, dependiendo de si quiere aplicar el middleware a todas las respuestas o a respuestas con un verbo particular HTTP (<code class="language-plaintext highlighter-rouge">GET</code>, <code class="language-plaintext highlighter-rouge">POST</code>, etc). Usted especifica rutas, lo mismo en ambos casos, aunque la ruta es opcional cuando llama <strong>app.use()</strong>.</p>

<p>El ejemplo de abajo muestra como puede agregar la funci√≥n middleware usando ambos m√©todos, y con/sin una ruta.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="c1">// An example middleware function</span>
<span class="kd">var</span> <span class="nx">a_middleware_function</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ... perform some operations</span>
  <span class="nx">next</span><span class="p">();</span> <span class="c1">// Call next() so Express will call the next middleware function in the chain.</span>
<span class="p">}</span>

<span class="c1">// Function added with use() for all routes and verbs</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">a_middleware_function</span><span class="p">);</span>

<span class="c1">// Function added with use() for a specific route</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/someroute</span><span class="dl">'</span><span class="p">,</span> <span class="nx">a_middleware_function</span><span class="p">);</span>

<span class="c1">// A middleware function added for a specific HTTP verb and route</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="nx">a_middleware_function</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>-info-Arriba declaramos la funci√≥n middleware separadamente y la configuramos como el callback. En nuestra funci√≥n previous manejadora de ruta declaramos la funci√≥n callback cuando esta fu√© usada. En JavaScript, cuealquer aproximaci√≥n es valida.</p>
</blockquote>

<p>La documentaci√≥n Express tiene mucha mas documentaci√≥n excelente acerca del uso y escritura de middleware Express.</p>

<h3 id="sirviendo-archivos-est√°ticos">Sirviendo archivos est√°ticos</h3>

<p>Puede utilizar el middleware <a href="http://expressjs.com/en/4x/api.html#express.static">express.static</a> para servir archivos est√°ticos, incluyendo sus imagenes, CSS y JavaScript (<code class="language-plaintext highlighter-rouge">static()</code> es la √∫nica funci√≥n middleware que es actualmente <strong>parte</strong> de <em>Express</em>). Por ejemplo, podria utilizar la linea de abajo para servir im√°genes, archivos CSS, y archivos JavaScript desde un directorio nombrado ‚Äò<strong>public‚Äô</strong> al mismo nivel desde donde llama a node:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">public</span><span class="dl">'</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Cualesquiere archivos en el directorio p√∫blico son servidos al agregar su nombre de archivo (<em>relativo</em> a la ubicaci√≥n del directorio ‚Äúp√∫blico‚Äù ) de la ubicaci√≥n URL. Por ejemplo:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>http://localhost:3000/images/dog.jpg
http://localhost:3000/css/style.css
http://localhost:3000/js/app.js
http://localhost:3000/about.html
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Puede llamar <code class="language-plaintext highlighter-rouge">static()</code> multiples ocasiones a servir multiples directorios. Si un archivo no puede ser encontrado por una funci√≥n middleware entonces este simplemente ser√° pasado en la subsequente middleware (el orden en que el middleware est√° basado en su orden de declaraci√≥n).</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">public</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">media</span><span class="dl">'</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Tambien puede crear un prefijo virtual para sus URLs est√°ticas, aun m√°s teniendo los archivos agregados en la ubicaci√≥n URL. Por ejemplo, aqui especificamos <a href="http://expressjs.com/en/4x/api.html#app.use">a mount path</a> tal que los archivos son bajados con el prefijo ‚Äú/media‚Äù:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/media</span><span class="dl">'</span><span class="p">,</span> <span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">public</span><span class="dl">'</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Ahora, puede bajar los archivos que estan en el directorio <code class="language-plaintext highlighter-rouge">publico</code> del path con prefijo <code class="language-plaintext highlighter-rouge">/media</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>http://localhost:3000/media/images/dog.jpg
http://localhost:3000/media/video/cat.mp4
http://localhost:3000/media/cry.mp3
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Para m√°s informaci√≥n, ver <a href="https://expressjs.com/en/starter/static-files.html">Sirviendo archivos est√°ticos en Express</a>.</p>

<h3 id="manejando-errores">Manejando errores</h3>

<p>Los errores manejados por una o m√°s funciones especiales middleware que tienen cuatro argumentos, en lugar de las usuales tres: <code class="language-plaintext highlighter-rouge">(err, req, res, next)</code>. For example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Something broke!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Estas pueden devolver cualquier contenido, pero deben ser llamadas despues de todas las otras <code class="language-plaintext highlighter-rouge">app.use()</code> llamadas de rutas tal que ellas son las √∫ltimas middleware en el proceso de manejo de request!</p>

<p>Express viene con un manejador de error integrado, el que se ocupa de error remanente que pudiera ser encontrado en la app. Esta funci√≥n middleware manejador de error esta agregada al final del stack de funciones middleware. Si pasa un error a <code class="language-plaintext highlighter-rouge">next()</code> y no lo maneja en un manejador de error, este sera manejado por el manejador de error integrado; el error sera escrito en el cliente con el rastreo de pila.</p>

<blockquote>
  <p>-info-El rastreo de pila no esta incluido en el ambiente de producci√≥n. Para ejecutarlo en modo de producci√≥n necesita configurar la variable de ambiente <code class="language-plaintext highlighter-rouge">NODE_ENV</code> to ‚Äò<code class="language-plaintext highlighter-rouge">production'</code>.</p>

  <p>HTTP404 y otros codigos de estatus de ‚Äúerror‚Äù no son tratados como errores. Si quiere manejar estos, puede agregar una funci√≥n middleware para hacerlo. Para mas informaci√≥n vea las <a href="http://expressjs.com/en/starter/faq.html#how-do-i-handle-404-responses">FAQ</a>.</p>
</blockquote>

<p>Para mayor informaci√≥n vea Manejo de error (Docs. Express).</p>

<h3 id="usando-bases-de-datos">Usando Bases de datos</h3>

<p>Las apps de <em>Express</em> pueden usar cualquier mecanismo de bases de datos suportadas por <em>Node</em> (<em>Express</em> en s√≠ mismo no define ninguna conducta/requerimiento especifico adicional para administraci√≥n de bases de datos). Hay muchas opciones, incluyendo PostgreSQL, MySQL, Redis, SQLite, MongoDB, etc.</p>

<p>Con el prop√≥sito de usar √©ste, debe primero instalar el manejador de bases de datos utilizando NPM. Por ejemplo, para instalar el manejador para el popular NoSQL MongoDB querr√≠a utilizar el comando:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>npm <span class="nb">install </span>mongodb
</pre></td></tr></tbody></table></code></pre></div></div>

<p>La base de datos por si misma puede ser instalada localmente o en un servidor de la nube. En su codigo Express requiere el manejador, conectarse a la base de datos, y entonces ejecutar operaciones crear, leer, actualizar, y borrar (CLAB). }El ejemplo de abajo (de la documentaci√≥n Express documentation) muestra como puede encontrar registros en la colecci√≥n ‚Äúmamiferos‚Äù usando MongoDB.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">MongoClient</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">mongodb</span><span class="dl">'</span><span class="p">).</span><span class="nx">MongoClient</span><span class="p">;</span>

<span class="nx">MongoClient</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="dl">'</span><span class="s1">mongodb://localhost:27017/animals</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">db</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>

  <span class="nx">db</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">mammals</span><span class="dl">'</span><span class="p">).</span><span class="nx">find</span><span class="p">().</span><span class="nx">toArray</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Otra aproximaci√≥n popular es acceder a su base de datos indirectamente, via an Mapeo Objeto Relacional (‚ÄúMOR‚Äù). En esta aproximaci√≥n usted define sus datos como ‚Äúobjetos‚Äù o ‚Äúmodelos‚Äù y el MOR mapea estos a trav√©s del delineamiento b√°sico de la base de datos. Esta aproximaci√≥n tiene el beneficio de que como un desarrollador puede continuar pensando en t√©rminos de objetos de JavaScript mas que en sem√°ntica de bases de datos, y en esto hay un lugar obvio para ejecutar la validaci√≥n y chequeo de entrada de datos. Hablaremos m√°s de bases de datos en un art√≠culo posterior.</p>

<p>Para m√°s informaci√≥n ver <a href="https://expressjs.com/en/guide/database-integration.html">Integracion de Bases de Datos</a> (docs Express ).</p>

<h3 id="renderizaci√≥n-de-data-vistas">Renderizaci√≥n de data (vistas)</h3>

<p>El Motor de plantilla (referido como ‚Äúmotor de vistas‚Äù por <em>Express</em>) le permite definir la estructura de documento de salida en una plantilla, usando marcadores de posici√≥n para datos que seran llenados cuando una pagina es generada. Las plantillas son utilizadas generalmete para crear HTML, pero tambien pueden crear otros tipos de documentos. Express tiene soporte para <a href="https://github.com/expressjs/express/wiki#template-engines">numerosos motores de plantillas</a>, y hay una util comparaci√≥n de los motores m√°s populares aqu√≠: <a href="https://strongloop.com/strongblog/compare-javascript-templates-jade-mustache-dust/">Comparando Motores de Plantillas de JavaScript: Jade, Mustache, Dust and More</a>.</p>

<p>En su c√≥digo de configuraci√≥n de su aplicaci√≥n usted configura el motor de plantillas para usar y su localizaci√≥n Express podir√≠a buscar plantillas usando las configuraciones de ‚Äòvistas‚Äô y ‚Äòmotores de vistas‚Äô, mostrado abajo (tendr√≠a tambi√©n que instalar el paquete conteniendo su librer√≠a de plantillas!)</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="c1">// Set directory to contain the templates ('views')</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">views</span><span class="dl">'</span><span class="p">,</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">views</span><span class="dl">'</span><span class="p">));</span>

<span class="c1">// Set view engine to use, in this case 'some_template_engine_name'</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">view engine</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">some_template_engine_name</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>La apariencia de la plantilla dependera de qu√© motor use. Asumiendo que tiene un archivo de plantillas nombrado ‚Äúindex.&lt;template_extension&gt;‚Äù este contiene placeholders para variables de datos nombradas ‚Äòtitle‚Äô y ‚Äúmessage‚Äù, podr√≠a llamar <a href="http://expressjs.com/en/4x/api.html#res.render"><code class="language-plaintext highlighter-rouge">Response.render()</code></a> en una funci√≥n manejadora de rutas para crear y enviar la HTML response:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="dl">'</span><span class="s1">index</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">About dogs</span><span class="dl">'</span><span class="p">,</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Dogs rock!</span><span class="dl">'</span> <span class="p">});</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Para m√°s informaci√≥n vea <a href="http://expressjs.com/en/guide/using-template-engines.html">Usando motores de plantillas con Express</a> (docs Express ).</p>

<h3 id="estructura-de-archivos">Estructura de Archivos</h3>

<p>Express no hace asunciones en t√©rminos de estructura o que componentes usted usa. Rutas, vistas, archivos est√°ticos, y otras l√≥gicas de aplicaci√≥n espec√≠fica puede vivir en cualquier n√∫mero de archivos con cualquier estructura de directorio. Mientras que esto es perfectamente posible, se puede tener toda la aplicaci√≥n en un solo archivo, en <em>Express</em>, tipicamente esto tiene sentido al desplegar su aplicacion dentro de archivos basados en funci√≥n (e.g. administracion de cuentas, blogs, tableros de discusion) y dominio de problema arquitectonico (e.g. modelo, vista or controlador si tu pasas a estar usando una <a href="https://developer.mozilla.org/es/docs/Web/Apps/Fundamentals/Modern_web_app_architecture/MVC_architecture">arquitectura MVC</a>).</p>

<p>En un t√≥pico posterior usaremos el Generador de Aplicaciones <em>Express Application Generator</em>, el que crea un esquelo de una app modular que podemos facilmente extender para crear aplicaciones web.</p>

<h2 id="resumen">Resumen</h2>

<p>¬°Felicitaciones, ha completado el primer paso en su viaje Express/Node! Ahora debes comprender los principales beneficios de Express y Node, y m√°s o menos c√≥mo se ver√≠an las partes principales de una aplicaci√≥n Express (rutas, middleware, manejo de errores y plantillas). ¬°Tambi√©n debe comprender que con Express como un framework unopinionated, la forma en que une estas partes y las bibliotecas que usa dependen en gran medida de usted!</p>

<p>Por supuesto, Express es deliberadamente un un framework de aplicaciones web muy ligero, por lo que gran parte de sus beneficios y potencial proviene de bibliotecas y caracter√≠sticas de terceros. Lo veremos con m√°s detalle en los siguientes art√≠culos. En nuestro pr√≥ximo art√≠culo, veremos c√≥mo configurar un entorno de desarrollo de Node, para que pueda comenzar a ver c√≥digo de Express en acci√≥n.</p>

<h2 id="ver-tambi√©n">Ver tambi√©n</h2>

<ul>
  <li><a href="https://nodejs.org/api/modules.html#modules_modules">Modules</a> (Node API docs)</li>
  <li><a href="https://expressjs.com/">Express</a> (home page)</li>
  <li><a href="http://expressjs.com/en/starter/basic-routing.html">Basic routing</a> (Express docs)</li>
  <li><a href="http://expressjs.com/en/guide/routing.html">Routing guide</a> (Express docs)</li>
  <li><a href="http://expressjs.com/en/guide/using-template-engines.html">Using template engines with Express</a> (Express docs)</li>
  <li><a href="https://expressjs.com/en/guide/using-middleware.html">Using middleware</a> (Express docs)</li>
  <li><a href="http://expressjs.com/en/guide/writing-middleware.html">Writing middleware for use in Express apps</a> (Express docs)</li>
  <li><a href="https://expressjs.com/en/guide/database-integration.html">Database integration</a> (Express docs)</li>
  <li><a href="https://expressjs.com/en/starter/static-files.html">Serving static files in Express</a> (Express docs)</li>
  <li><a href="http://expressjs.com/en/guide/error-handling.html">Error handling</a> (Express docs)</li>
</ul>

:ET